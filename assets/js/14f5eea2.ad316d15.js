"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[2864],{200:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"HackTheBox/Battlegrounds/Cyber Mayhem/Summer","title":"Summer","description":"\u4fe1\u606f\u6536\u96c6","source":"@site/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Summer.md","sourceDirName":"HackTheBox/Battlegrounds/Cyber Mayhem","slug":"/HackTheBox/Battlegrounds/Cyber Mayhem/Summer","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Summer","draft":false,"unlisted":false,"editUrl":"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Summer.md","tags":[],"version":"current","frontMatter":{},"sidebar":"HackTheBox_Sidebar","previous":{"title":"Snowbell","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Snowbell"},"next":{"title":"Triston","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Triston"}}');var a=s(74848),t=s(28453);const i={},o="Summer",p={},u=[{value:"\u4fe1\u606f\u6536\u96c6",id:"\u4fe1\u606f\u6536\u96c6",level:2},{value:"Port 5000 Python Server",id:"port-5000-python-server",level:2},{value:"Port 1337 Pyjail",id:"port-1337-pyjail",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"summer",children:"Summer"})}),"\n",(0,a.jsx)(e.h2,{id:"\u4fe1\u606f\u6536\u96c6",children:"\u4fe1\u606f\u6536\u96c6"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'Detected ss and lsof, executing related commands...\nPort: 53, PID: 574\n\u2014> Command: /lib/systemd/systemd-resolved \nPort: 22, PID: 821\n\u2014> Command: sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups \nPort: 25, PID: 1077\n\u2014> Command: /usr/lib/postfix/sbin/master -w \nPort: 1337, PID: 820\n\u2014> Command: /usr/bin/socat TCP-LISTEN:1337,reuseaddr,fork EXEC:/home/mats/jailor/jail.py \nPort: 5000, PID: 1228\n\u2014> Command: /usr/bin/python3 /home/mats/summer-software/main.py \n\n## \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 ##\n\nNginx is not installed.\n\n## \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 ##\n\nDetected apache, analyzing its configuration...\n\nUnique Hosts:\n\n\n## \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 ##\n\nChecking /etc/sudoers (active configurations only):\n  Defaults      env_reset\n  Defaults      mail_badpass\n  Defaults      secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"\n  root  ALL=(ALL:ALL) ALL\n  %admin ALL=(ALL) ALL\n  %sudo ALL=(ALL:ALL) ALL\n\u2014\u2014\u2014\nFinding SUID files:\n/usr/lib/snapd/snap-confine\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/openssh/ssh-keysign\n/usr/lib/policykit-1/polkit-agent-helper-1\n/usr/lib/eject/dmcrypt-get-device\n/usr/bin/mount\n/usr/bin/umount\n/usr/bin/chfn\n/usr/bin/pkexec\n/usr/bin/passwd\n/usr/bin/fusermount\n/usr/bin/ed\n/usr/bin/newgrp\n/usr/bin/sudo\n/usr/bin/gpasswd\n/usr/bin/nice\n/usr/bin/chsh\n/usr/bin/at\n/usr/bin/su\n/snap/core20/1328/usr/bin/chfn\n/snap/core20/1328/usr/bin/chsh\n/snap/core20/1328/usr/bin/gpasswd\n/snap/core20/1328/usr/bin/mount\n/snap/core20/1328/usr/bin/newgrp\n/snap/core20/1328/usr/bin/passwd\n/snap/core20/1328/usr/bin/su\n/snap/core20/1328/usr/bin/sudo\n/snap/core20/1328/usr/bin/umount\n/snap/core20/1328/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core20/1328/usr/lib/openssh/ssh-keysign\n/snap/core20/1270/usr/bin/chfn\n/snap/core20/1270/usr/bin/chsh\n/snap/core20/1270/usr/bin/gpasswd\n/snap/core20/1270/usr/bin/mount\n/snap/core20/1270/usr/bin/newgrp\n/snap/core20/1270/usr/bin/passwd\n/snap/core20/1270/usr/bin/su\n/snap/core20/1270/usr/bin/sudo\n/snap/core20/1270/usr/bin/umount\n/snap/core20/1270/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core20/1270/usr/lib/openssh/ssh-keysign\n/snap/core18/2284/bin/mount\n/snap/core18/2284/bin/ping\n/snap/core18/2284/bin/su\n/snap/core18/2284/bin/umount\n/snap/core18/2284/usr/bin/chfn\n/snap/core18/2284/usr/bin/chsh\n/snap/core18/2284/usr/bin/gpasswd\n/snap/core18/2284/usr/bin/newgrp\n/snap/core18/2284/usr/bin/passwd\n/snap/core18/2284/usr/bin/sudo\n/snap/core18/2284/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core18/2284/usr/lib/openssh/ssh-keysign\n/snap/core18/2253/bin/mount\n/snap/core18/2253/bin/ping\n/snap/core18/2253/bin/su\n/snap/core18/2253/bin/umount\n/snap/core18/2253/usr/bin/chfn\n/snap/core18/2253/usr/bin/chsh\n/snap/core18/2253/usr/bin/gpasswd\n/snap/core18/2253/usr/bin/newgrp\n/snap/core18/2253/usr/bin/passwd\n/snap/core18/2253/usr/bin/sudo\n/snap/core18/2253/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/snap/core18/2253/usr/lib/openssh/ssh-keysign\n/snap/snapd/14295/usr/lib/snapd/snap-confine\n/snap/snapd/14549/usr/lib/snapd/snap-confine\n\u2014\u2014\u2014\nFinding files with special capabilities:\n  /usr/lib/x86_64-linux-gnu/gstreamer1.0/gstreamer-1.0/gst-ptp-helper = cap_net_bind_service,cap_net_admin+ep\n  /usr/bin/ping = cap_net_raw+ep\n  /usr/bin/traceroute6.iputils = cap_net_raw+ep\n  /usr/bin/ed = cap_setuid+ep\n  /usr/bin/mtr-packet = cap_net_raw+ep\n  /snap/core20/1328/usr/bin/ping = cap_net_raw+ep\n  /snap/core20/1270/usr/bin/ping = cap_net_raw+ep\n'})}),"\n",(0,a.jsx)(e.h2,{id:"port-5000-python-server",children:"Port 5000 Python Server"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",metastring:'title="/home/mats/summer-software/main.py"',children:"#!/usr/bin/python3\nfrom app.app import app\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)\n"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",metastring:'title="util.py"',children:"import subprocess\n\ndef get_date(fmt):\n    proc = subprocess.Popen('date -d \"14 FEB 2023\" \"+{}\"'.format(fmt), shell=True, stdout=subprocess.PIPE)\n    out = proc.stdout.read().decode('utf-8')\n    return out\n"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",metastring:'title="./blueprints/routes.py"',children:"from flask import render_template, request, current_app, Blueprint, url_for, render_template_string, redirect\nfrom app.util import get_date\n\n\nweb = Blueprint('web', __name__)\n\n@web.route('/')\ndef index():\n    return render_template('index.html')\n\n@web.route('/release', methods=['GET'])\ndef time():\n    if request.args.get('format'):\n        fmt = request.args.get('format')\n        date = get_date(fmt)\n        return render_template('date.html',date=date)\n    else:\n        return redirect(\"/release?format=%25d%20%25h%20%25Y\", code=302)\n"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",metastring:'title="./app/app.py"',children:"from flask import Flask\nfrom app.blueprints.routes import web\nfrom sassutils.wsgi import SassMiddleware\n\napp = Flask(__name__)\napp.wsgi_app = SassMiddleware(app.wsgi_app, { 'app': ('static/scss', 'static/css', '/static/css')})\n\napp.config['SECRET_KEY'] = 'R3d_p4ndaz_ru1e$%#$%'\napp.register_blueprint(web, url_prefix='/')\n@app.errorhandler(Exception)\ndef handle_error(error):\n    message = error.description if hasattr(error, 'description') else [str(x) for x in error.args]\n    response = {\n        'error': {\n            'type': error.__class__.__name__,\n            'message': message\n        }\n    }\n\n    return response, error.code if hasattr(error, 'code') else 500\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u5154\u5b50\u6d1e\uff0c\u8fd9\u8fb9\u63a7\u5236 fmt \u53d8\u91cf\u7684\u503c\u6ca1\u6709\u610f\u4e49\uff0c\u4e0d\u80fd\u5b9e\u73b0 SSTI \u548c RCE"}),"\n",(0,a.jsx)(e.h2,{id:"port-1337-pyjail",children:"Port 1337 Pyjail"})]})}function d(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>o});var r=s(96540);const a={},t=r.createContext(a);function i(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:i(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);